function e(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;i>o;o++)!n&&o in r||(n||(n=[].slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||[].slice.call(r))}var r,t,n,o,i,a="function"==typeof Array.from?Array.from:(t||(t=1,n=function(e){return"function"==typeof e},o=function(e){var r=function(e){var r=Number(e);return isNaN(r)?0:0!==r&&isFinite(r)?(r>0?1:-1)*Math.floor(Math.abs(r)):r}(e);return Math.min(Math.max(r,0),9007199254740991)},i=function(e){var r=e.next();return!r.done&&r},r=function(e){var r,t,a,c=this,s=arguments.length>1?arguments[1]:void 0;if(void 0!==s){if(!n(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}var g=function(e,r){if(null!=e&&null!=r){var t=e[r];if(null==t)return;if(!n(t))throw new TypeError(t+" is not a function");return t}}(e,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(e));if(void 0!==g){t=n(c)?Object(new c):[];var u,l,f=g.call(e);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");for(a=0;;){if(!(u=i(f)))return t.length=a,t;l=u.value,t[a]=s?s.call(r,l,a):l,a++}}else{var d=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var h,p=o(d.length);for(t=n(c)?Object(new c(p)):Array(p),a=0;p>a;)h=d[a],t[a]=s?s.call(r,h,a):h,a++;t.length=p}return t}),r),c=function(e){return u(["undefined","null"],m(e))},s=function(e){return"string"===m(e)},g=function(e){return"object"===m(e)&&!c(e)},u=function(e,r){return("array"===m(e)||"string"===m(e))&&e.indexOf(r)>=0},l=a,f=function(e,r){if(s(e)){var t=e.length,n=t;n>t&&(n=t);var o=n;return(n-=r.length)>=0&&e.slice(n,o)===r}return!1},d={}.hasOwnProperty,h=function(e,r){return!c(e)&&d.call(e,r)},p=function(e){return g(e)?Object.keys(e):[]},m=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},v=function(e){try{return e()}catch(e){return}},w=function(e){return f(e,"_gioenc")?e.slice(0,-7):e},y={A:1,a:1,Z:1,z:1,"@":1,"{":1},I=function(e){return(e=e||"").split("").map((function(e){return y[e]?e:O(e)})).join("")},O=function(e){if(/[0-9]/.test(e))return 1^+e;var r=e.charCodeAt(0);return String.fromCharCode(1^r)},S=function(){this.getItem=function(e){var r,t=v((function(){return JSON.parse(localStorage.getItem(w(e))||"")}))||{};return g(t)&&t.expiredAt>+Date.now()?(r=function(e){return s(e)&&(t="gioenc-",s(r=e)&&r.slice(0,7)===t)&&v((function(){return I(e.replace("gioenc-",""))}))||e;var r,t}(t.value),isNaN(Number(r))&&v((function(){return JSON.parse(r)}))||r):void 0},this.setItem=function(e,r,t){var n,o=null!=t?t:+new Date((new Date).getFullYear()+3,(new Date).getMonth(),(new Date).getDay()).getTime();localStorage.setItem(w(e),JSON.stringify({value:s(r)&&r.length&&f(e,"_gioenc")?(n=r,c(n)?n:v((function(){return"gioenc-".concat(I(n))}))||n):r,expiredAt:o}))},this.removeItem=function(e){return localStorage.removeItem(w(e))},this.hasItem=function(e){return!!localStorage.getItem(w(e))},this.getKeys=function(){return l(Array(localStorage.length)).map((function(e,r){return localStorage.key(r)}))},this.type="localStorage"},b={},j={}.hasOwnProperty;function q(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function A(e){try{return encodeURIComponent(e)}catch(e){return null}}b.stringify=function(e,r){r=r||"";var t,n,o=[];for(n in"string"!=typeof r&&(r="?"),e)if(j.call(e,n)){if((t=e[n])||null!=t&&!isNaN(t)||(t=""),n=A(n),t=A(t),null===n||null===t)continue;o.push(n+"="+t)}return o.length?r+o.join("&"):""},b.parse=function(e){for(var r,t=/([^=?#&]+)=?([^&]*)/g,n={};r=t.exec(e);){var o=q(r[1]),i=q(r[2]);null===o||null===i||o in n||(n[o]=i)}return n};var C={gioprojectid:"projectId",giodatacollect:"dataCollect",gioappid:"domain",giodatasourceid:"dataSourceId",gios:"sessionId",giou:"uid",giocs1:"userId",giouserkey:"userKey",gioappchannel:"appChannel",giodevicebrand:"deviceBrand",giodevicemodel:"deviceModel",giodevicetype:"deviceType",giolanguage:"language",gionetworkstate:"networkState",giooperatingsystem:"operatingSystem",gioplatform:"platform",gioplatformversion:"platformVersion",gioscreenheight:"screenHeight",gioscreenwidth:"screenWidth"},E=["gioprojectid","giodatacollect","giodatasourceid","gioplatform"],k=["giodatasourceid","gioplatform","gioappchannel","giodevicebrand","giodevicemodel","giodevicetype","giolanguage","gionetworkstate","giooperatingsystem","gioplatformversion","gioscreenheight","gioscreenwidth"],N=["giocs1","gios","giou","giouserkey"],x="gdp_query_string",F={name:"gioEmbeddedAdapter",method:function(r){var t=this;this.growingIO=r,this.onOptionsInit=function(e,r){var n,o,i,a=r.projectId,c=r.appId,s=e===t.growingIO.trackingId?r.hashtag:t.growingIO.vdsConfig.hashtag,l=t.getGQS(s);if(u(["search","hash"],t.qsFrom)&&!(function(e){return Array.isArray(e)&&"array"===m(e)}(i=l)?0===i.length:g(i)?0===p(i).length:!i)&&t.storage.setItem(x,l),!t.growingIO.useEmbeddedInherit&&"none"!==t.qsFrom&&l.gioprojectid===a&&l.gioappid===c){t.growingIO.useEmbeddedInherit=e,t.growingIO.dataStore.updateVdsConfig(e,{minipLink:!0});var f=t.growingIO.dataStore.getTrackerVds(e);E.forEach((function(e){if(h(l,e))if("giodatacollect"===e)f.dataCollect=u(["true",!0],l.giodatacollect);else{var r=C[e];u(["domain","platform"],r)&&(f.originValues||(f.originValues={}),f.originValues[r]=f[r]),f[r]=l[e]}})),t.growingIO.dataStore.updateVdsConfig(e,f);var d=t.growingIO,v=d.userStore,w=d.dataStore.eventContextBuilderInst;v.setUid(l.giou),v.setSessionId(e,l.gios),v.setUserId(e,null!==(n=l.giocs1)&&void 0!==n?n:""),v.setUserKey(e,null!==(o=l.giouserkey)&&void 0!==o?o:"");var y=window.setInterval((function(){v.setSessionId(e,l.gios)}),.8*r.sessionExpires*60*1e3);window.onbeforeunload=function(){window.clearInterval(y),y=void 0},k.forEach((function(e){h(l,e)&&(w.minpExtraParams[C[e]]=l[e])}));var I=t.growingIO.setUserId;t.growingIO.setUserId=function(){for(var r=[],t=0;arguments.length>t;t++)r[t]=arguments[t];if(r[0]!==e)return I.apply(this,r)};var O=t.growingIO.clearUserId;if(t.growingIO.clearUserId=function(){for(var r=[],t=0;arguments.length>t;t++)r[t]=arguments[t];if(r[0]!==e)return O.apply(this,r)},h(l,"giodatacollect")){var S=t.growingIO.setOption;t.growingIO.setOption=function(){for(var r=[],t=0;arguments.length>t;t++)r[t]=arguments[t];if(r[0]!==e)return S.apply(this,r)}}}t.gioURLRewrite(),t.growingIO.dataStore.currentPage.parsePage()},this.getGQS=function(r){var n=window.location.search,o=window.location.hash,i=r?o.substring(o.indexOf("?")+1):"",a=t.storage.getItem(x),c=b.parse(n),s=b.parse(i),g=a,l={};if(h(c,"gioprojectid"))l=c,t.qsFrom="search";else if(h(s,"gioprojectid"))l=s,t.qsFrom="hash";else{if(!h(g,"gioprojectid"))return t.qsFrom="none",{};l=g,t.qsFrom="local"}var f={},d={},m=e(e(["gioappid","gioprojectid","giodatacollect"],N,!0),k,!0);return p(l).forEach((function(e){var r=e.toLowerCase();u(m,r)?u(["","undefined","null",void 0,null],l[e])?f[r]="":(f[r]=l[e],u(["true","TRUE",!0],l[e])&&(f[r]=!0),u(["false","FALSE",!1],l[e])&&(f[r]=!1)):d[e]=l[e]})),t.gqs=f,t.customerqs=d,f},this.gioURLRewrite=function(){var e=t.growingIO.vdsConfig.hashtag,r=window.location.search,n=window.location.hash,o=!1;if("search"===t.qsFrom&&(r=b.stringify(t.customerqs,!0),o=!0),e&&"hash"===t.qsFrom&&(n="".concat(n.split("?")[0]).concat(b.stringify(t.customerqs,!0)),o=!0),o){var i="".concat(window.location.pathname).concat(r||"").concat(n||"");window.history.replaceState(null,document.title,i)}},this.pluginVersion="4.2.4",this.gqs={},this.customerqs={},this.qsFrom="search",this.storage=new S,this.growingIO.emitter.on("OPTION_INITIALIZED",(function(e){var r=e.trackingId,n=e.vdsConfig;t.onOptionsInit(r,n)}))}};export{F as default};
