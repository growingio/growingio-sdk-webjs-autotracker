!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e,n,r=function(){return r=Object.assign||function(e){for(var n,r=1,t=arguments.length;t>r;r++)for(var o in n=arguments[r])({}).hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},r.apply(this,arguments)};function t(e,n,r){if(r||2===arguments.length)for(var t,o=0,i=n.length;i>o;o++)!t&&o in n||(t||(t=[].slice.call(n,0,o)),t[o]=n[o]);return e.concat(t||[].slice.call(n))}var o,i,a,c="function"==typeof Array.from?Array.from:(n||(n=1,o=function(e){return"function"==typeof e},i=function(e){var n=function(e){var n=Number(e);return isNaN(n)?0:0!==n&&isFinite(n)?(n>0?1:-1)*Math.floor(Math.abs(n)):n}(e);return Math.min(Math.max(n,0),9007199254740991)},a=function(e){var n=e.next();return!n.done&&n},e=function(e){var n,r,t,c=this,u=arguments.length>1?arguments[1]:void 0;if(void 0!==u){if(!o(u))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var s=function(e,n){if(null!=e&&null!=n){var r=e[n];if(null==r)return;if(!o(r))throw new TypeError(r+" is not a function");return r}}(e,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(e));if(void 0!==s){r=o(c)?Object(new c):[];var g,l,f=s.call(e);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");for(t=0;;){if(!(g=a(f)))return r.length=t,r;l=g.value,r[t]=u?u.call(n,l,t):l,t++}}else{var d=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var h,p=i(d.length);for(r=o(c)?Object(new c(p)):Array(p),t=0;p>t;)h=d[t],r[t]=u?u.call(n,h,t):h,t++;r.length=p}return r}),e),u=function(e){return l(["undefined","null"],w(e))},s=function(e){return"string"===w(e)},g=function(e){return"object"===w(e)&&!u(e)},l=function(e,n){return("array"===w(e)||"string"===w(e))&&("array"===w(n)?n.some((function(n){return e.indexOf(n)>=0})):e.indexOf(n)>=0)},f=c,d=function(e,n){return!!s(e)&&e.slice(0,n.length)===n},h=function(e,n){if(s(e)){var r=e.length,t=r;t>r&&(t=r);var o=t;return(t-=n.length)>=0&&e.slice(t,o)===n}return!1},p={}.hasOwnProperty,m=function(e,n){return!u(e)&&p.call(e,n)},v=function(e){return g(e)?Object.keys(e):[]},w=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},I=function(e){try{return e()}catch(e){return}},y=function(e){return h(e,"_gioenc")?e.slice(0,-7):e},O=function(e){if(d(e,"?")||l(e,["=","&"])){var n={};return d(e,"?")&&(e=e.substring(1)),e.split("&").forEach((function(e){var r,t=e.split("="),o=t[0],i=null!==(r=t[1])&&void 0!==r?r:"";u(o)||""===o||(n[o]=i)})),n}return decodeURIComponent(e)},S=function(e,n){if(void 0===n&&(n=!1),"object"===w(e)){var r="";return o=function(e,t){""===r?r=(n?"?":"")+"".concat(t,"=").concat(e):r+="&".concat(t,"=").concat(e)},v(t=e).forEach((function(e){return o(t[e],e)})),r}var t,o;if("string"===w(e))return encodeURIComponent(e)},b={A:1,a:1,Z:1,z:1,"@":1,"{":1},j=function(e){return(e=e||"").split("").map((function(e){return b[e]?e:q(e)})).join("")},q=function(e){if(/[0-9]/.test(e))return 1^+e;var n=e.charCodeAt(0);return String.fromCharCode(1^n)},C=function(){this.getItem=function(e){var n,r=I((function(){return JSON.parse(localStorage.getItem(y(e))||"")}))||{};return g(r)&&r.expiredAt>+Date.now()?function(e){return isNaN(Number(e))&&I((function(){return JSON.parse(e)}))||e}((n=r.value,s(n)&&d(n,"gioenc-")&&I((function(){return j(n.replace("gioenc-",""))}))||n)):void 0},this.setItem=function(e,n,r){var t,o=null!=r?r:+new Date((new Date).getFullYear()+3,(new Date).getMonth(),(new Date).getDay()).getTime();localStorage.setItem(y(e),JSON.stringify({value:s(n)&&n.length&&h(e,"_gioenc")?(t=n,u(t)?t:I((function(){return"gioenc-".concat(j(t))}))||t):n,expiredAt:o}))},this.removeItem=function(e){return localStorage.removeItem(y(e))},this.hasItem=function(e){return!!localStorage.getItem(y(e))},this.getKeys=function(){return f(Array(localStorage.length)).map((function(e,n){return localStorage.key(n)}))},this.type="localStorage"},E={},A={}.hasOwnProperty;function k(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function U(e){try{return encodeURIComponent(e)}catch(e){return null}}E.stringify=function(e,n){n=n||"";var r,t,o=[];for(t in"string"!=typeof n&&(n="?"),e)if(A.call(e,t)){if((r=e[t])||null!=r&&!isNaN(r)||(r=""),t=U(t),r=U(r),null===t||null===r)continue;o.push(t+"="+r)}return o.length?n+o.join("&"):""},E.parse=function(e){for(var n,r=/([^=?#&]+)=?([^&]*)/g,t={};n=r.exec(e);){var o=k(n[1]),i=k(n[2]);null===o||null===i||o in t||(t[o]=i)}return t};var N={gioprojectid:"projectId",giodatacollect:"dataCollect",gioappid:"domain",giodatasourceid:"dataSourceId",gios:"sessionId",giou:"uid",giocs1:"userId",giouserkey:"userKey",gioappchannel:"appChannel",giodevicebrand:"deviceBrand",giodevicemodel:"deviceModel",giodevicetype:"deviceType",giolanguage:"language",gionetworkstate:"networkState",giooperatingsystem:"operatingSystem",gioplatform:"platform",gioplatformversion:"platformVersion",gioscreenheight:"screenHeight",gioscreenwidth:"screenWidth"},x=["gioprojectid","giodatacollect","giodatasourceid","gioplatform"],F=["giodatasourceid","gioplatform","gioappchannel","giodevicebrand","giodevicemodel","giodevicetype","giolanguage","gionetworkstate","giooperatingsystem","gioplatformversion","gioscreenheight","gioscreenwidth"],T=["giocs1","gios","giou","giouserkey"],R="gdp_query_string";window.gioEmbeddedAdapter={name:"gioEmbeddedAdapter",method:function(e){var n=this;this.growingIO=e,this.onOptionsInit=function(e,r){var t,o,i,a=r.projectId,c=r.appId,u=e===n.growingIO.trackingId?r.hashtag:n.growingIO.vdsConfig.hashtag,s=n.getGQS(u);if(l(["search","hash"],n.qsFrom)&&!(function(e){return Array.isArray(e)&&"array"===w(e)}(i=s)?0===i.length:g(i)?0===v(i).length:!i)&&n.storage.setItem(R,s),!n.growingIO.useEmbeddedInherit&&"none"!==n.qsFrom&&s.gioprojectid===a&&s.gioappid===c){n.growingIO.useEmbeddedInherit=e,n.growingIO.dataStore.updateVdsConfig(e,{minipLink:!0});var f=n.growingIO.dataStore.getTrackerVds(e);x.forEach((function(e){if(m(s,e))if("giodatacollect"===e)f.dataCollect=l(["true",!0],s.giodatacollect);else{var n=N[e];l(["domain","platform"],n)&&(f.originValues||(f.originValues={}),f.originValues[n]=f[n]),f[n]=s[e]}})),n.growingIO.dataStore.updateVdsConfig(e,f);var d=n.growingIO,h=d.userStore,p=d.dataStore.eventContextBuilderInst;h.setUid(s.giou),h.setSessionId(e,s.gios),h.setUserId(e,null!==(t=s.giocs1)&&void 0!==t?t:""),h.setUserKey(e,null!==(o=s.giouserkey)&&void 0!==o?o:"");var I=window.setInterval((function(){h.setSessionId(e,s.gios)}),.8*r.sessionExpires*60*1e3);window.onbeforeunload=function(){window.clearInterval(I),I=void 0},F.forEach((function(e){m(s,e)&&(p.minpExtraParams[N[e]]=s[e])}));var y=n.growingIO.setUserId;n.growingIO.setUserId=function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];if(n[0]!==e)return y.apply(this,n)};var O=n.growingIO.clearUserId;if(n.growingIO.clearUserId=function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];if(n[0]!==e)return O.apply(this,n)},m(s,"giodatacollect")){var S=n.growingIO.setOption;n.growingIO.setOption=function(){for(var n=[],r=0;arguments.length>r;r++)n[r]=arguments[r];if(n[0]!==e)return S.apply(this,n)}}}!1!==n.growingIO.dataStore.getTrackerVds(n.growingIO.trackingId).rewriteQuery&&n.gioURLRewrite(),n.growingIO.dataStore.currentPage.parsePage()},this.getGQS=function(e){var o=window.location.search,i=window.location.hash,a=e?i.substring(i.indexOf("?")+1):"",c=n.storage.getItem(R),u=E.parse(o),s=O(o),g=E.parse(a),f=O(a),d={},h={};if(m(u,"gioprojectid"))d=u,h=s,n.qsFrom="search";else if(m(g,"gioprojectid"))d=g,h=f,n.qsFrom="hash";else{if(!m(c,"gioprojectid"))return n.qsFrom="none",{};d=c,h=c,n.qsFrom="local"}var p={},w={},I=t(t(["gioappid","gioprojectid","giodatacollect"],T,!0),F,!0);return v(d).forEach((function(e){var n=e.toLowerCase();l(I,n)?l(["","undefined","null",void 0,null],d[e])?p[n]="":(p[n]=d[e],l(["true","TRUE",!0],d[e])&&(p[n]=!0),l(["false","FALSE",!1],d[e])&&(p[n]=!1)):w[e]=h[e]})),n.gqs=p,n.customerqs=w,r(r({},n.gqs),n.customerqs)},this.gioURLRewrite=function(){var e=n.growingIO.vdsConfig.hashtag,r=window.location.search,t=window.location.hash,o=!1;if("search"===n.qsFrom&&(r=S(n.customerqs,!0),o=!0),e&&"hash"===n.qsFrom&&(t="".concat(t.split("?")[0]).concat(S(n.customerqs,!0)),o=!0),o){var i="".concat(window.location.pathname).concat(r||"").concat(t||"");window.history.replaceState(null,document.title,i)}},this.pluginVersion="4.2.6",this.gqs={},this.customerqs={},this.qsFrom="search",this.storage=new C,this.growingIO.emitter.on("OPTION_INITIALIZED",(function(e){var r=e.trackingId,t=e.vdsConfig;n.onOptionsInit(r,t)}))}}}));
