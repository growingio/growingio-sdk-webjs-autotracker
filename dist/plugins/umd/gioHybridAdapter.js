!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,n=1,i=arguments.length;i>n;n++)for(var r in t=arguments[n])({}).hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var t,n,i,r,o,a="function"==typeof Array.from?Array.from:(n||(n=1,i=function(e){return"function"==typeof e},r=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),9007199254740991)},o=function(e){var t=e.next();return!t.done&&t},t=function(e){var t,n,a,u=this,s=arguments.length>1?arguments[1]:void 0;if(void 0!==s){if(!i(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}var c=function(e,t){if(null!=e&&null!=t){var n=e[t];if(null==n)return;if(!i(n))throw new TypeError(n+" is not a function");return n}}(e,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(e));if(void 0!==c){n=i(u)?Object(new u):[];var d,l,f=c.call(e);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");for(a=0;;){if(!(d=o(f)))return n.length=a,n;l=d.value,n[a]=s?s.call(t,l,a):l,a++}}else{var g=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var v,h=r(g.length);for(n=i(u)?Object(new u(h)):Array(h),a=0;h>a;)v=g[a],n[a]=s?s.call(t,v,a):v,a++;n.length=h}return n}),t),u=function(e){return d(["undefined","null"],h(e))},s=function(e){return"object"===h(e)&&!u(e)},c=function(e){return Array.isArray(e)&&"array"===h(e)},d=function(e,t){return("array"===h(e)||"string"===h(e))&&e.indexOf(t)>=0},l=function(e){return u(e)?"":"".concat(e)},f=function(e){return s(e)?Object.keys(e):[]},g=function(e,t){f(e).forEach((function(n){return t(e[n],n)}))},v=function(e,t){if(!s(e))return!1;try{return"string"===h(t)?delete e[t]:"array"===h(t)?t.map((function(t){return delete e[t]})):(function(e){return"regexp"===h(e)}(t)&&f(e).forEach((function(n){t.test(n)&&v(e,n)})),!0)}catch(e){return!1}},h=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},p=function(){return p=Object.assign||function(e){for(var t,n=1,i=arguments.length;i>n;n++)for(var r in t=arguments[n])({}).hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},p.apply(this,arguments)};function w(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;o>r;r++)!i&&r in t||(i||(i=[].slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||[].slice.call(t))}var N,m=function(e){try{return e()}catch(e){return}},b=function(e){return"number"===O(e)},y=function(e){return"object"===O(e)&&!function(e){return L(["undefined","null"],O(e))}(e)},I=function(e){return Array.isArray(e)&&"array"===O(e)},E=function(e,t){if(I(e))for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},L=function(e,t){return("array"===O(e)||"string"===O(e))&&e.indexOf(t)>=0},_=a,x=function(e){return y(e)?Object.keys(e):[]},T=function(e){return I(e)?0===e.length:y(e)?0===x(e).length:!e},C=function(e){if(I(e)){for(var t=0,n=[],i=0,r=e;i<r.length;i++){var o=r[i];o&&!T(o)&&(n[t++]=o)}return n}return e},O=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},S=["body","br","canvas","clippath","defs","desc","g","hr","html","iframe","math","param","path","rect","script","style","text","title","tspan","use"],k=["button","reset","submit"],A=w(w([],k,!0),["file"],!1),U=["checkbox","color","radio","range"],H=w(w([],U,!0),["date","datetime-local","month","number","password","text","time","week"],!1),B=["tr","li","dt","dd"],D=w(["a","button","dl"],B,!0),P=["i","em","svg","img"],G=["i","span","em","b","strong","bdo"],W=/(^| |[^ ]+\-)(clear|clearfix|active|hover|enabled|current|selected|unselected|hidden|display|focus|disabled|undisabled|open|checked|unchecked|undefined|null|ng-|growing-)[^\. ]*/g,j=/^([a-zA-Z\-\_0-9]+)$/,V="data-growing-ignore",J="data-growing-container",X="data-growing-index",K="data-growing-title",M=function(e,t){var n;return null!==(n=m((function(){return e.hasAttribute(t)&&"false"!==e.getAttribute(t)})))&&void 0!==n?n:m((function(){return e.hasOwnPerporty(t)}))},z=function(e,t){var n;return null!==(n=m((function(){return e.getAttribute(t)})))&&void 0!==n?n:m((function(){return e.attributes[t].value}))},R=function(e){var t,n=!L(S,e.tagName.toLowerCase()),i=Y(e);return n&&i&&L(G,null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())?R(i):e},Z=function(e,t,n){if(void 0===t&&(t=5),void 0===n&&(n=0),!e.children)return!1;if("svg"===e.tagName.toLocaleLowerCase())return n>t;if(n>t)return!0;for(var i=0;i<e.children.length;i++){var r=e.children[i];if(Z(r,t,n+1))return!0}return!1},F=function(e,t){var n=e.tagName.toLowerCase();if(!(e instanceof Element))return!1;if(M(e,V))return!1;if(L(S,n))return!1;if(L(["circleClick","circleHover","click"],t)){if("textarea"===n&&"click"===t)return!1;if("input"===n){if("click"===t&&!L(A,z(e,"type")))return!1;if(L(["circleClick","circleHover"],t)&&!L(w(w([],A,!0),H,!0),z(e,"type")))return!1}if(!Q(e)&&Z(e,5))return!1}return!0},q=function(e,t){return void 0===t&&(t=!1),_((null==e?void 0:e.childNodes)||[]).filter((function(e){return L(t?[Node.ELEMENT_NODE,Node.TEXT_NODE]:[Node.ELEMENT_NODE],e.nodeType)}))},Y=function(e){return $(e.parentElement)?null:e.parentElement},$=function(e){return!e||L(["BODY","HTML","#document"],e.tagName)},Q=function(e){return M(e,J)||L(D,e.tagName.toLowerCase())||"input"===e.tagName.toLowerCase()&&L(k,e.type)},ee=function(e){var t=q(e);return!T(t)&&t.every((function(e){var t=ne(e),n=L(e.classList,"icon");return!(!t&&!n||te(e))}))},te=function(e){var t=q(e,!0);return!T(t)&&t.every((function(e){var t=e.nodeType===Node.TEXT_NODE,n=ie(e);return!(!t||!n)}))},ne=function(e){return L(P,e.tagName.toLocaleLowerCase())},ie=function(e){var t=q(e,!0).filter((function(e){var t;return e.nodeType===Node.TEXT_NODE||L(G,null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return re(e.textContent,e.textContent.length)}));return re(C(t).join(" "))},re=function(e,t){return void 0===t&&(t=50),e&&(null==(e=e.replace(/[\n \t]+/g," ").trim())?void 0:e.length)?e.slice(0,b(t)&&t>0?t:void 0):""},oe=/[^/]*.(bmp|jpg|jpeg|png|gif|svg|psd|webp|apng)/gi,ae=function(e,t){switch(t){case"a":return function(e){if(M(e,"href")){var t=z(e,"href");if(t&&0!==t.indexOf("javascript"))return t.slice(0,320)}return""}(e);case"img":return function(e){var t=e.src;if(t&&-1===t.indexOf("data:image")){var n=t.match(oe),i=T(n)?"":n[0];if(i.indexOf("%")>-1){var r=function(e,t){var n=-1;if(I(e))for(var i=0;i<e.length;i++)"%"===e[i]&&(n=i);return n}(i.split(""));i=i.substring(r+3,i.length)}return i}return""}(e);default:return""}},ue={a:function(e){return ie(e)||de(e)||ae(e,"a")},button:function(e){return z(e,"name")||ie(e)||de(e)||le(e)},img:function(e){return re(z(e,"alt"))||ae(e,"img")},input:function(e){if("password"===e.type)return"";var t,n,i=e instanceof HTMLInputElement&&L(A,e.type),r=M(e,"data-growing-track");if(i||r)return re(e.value);if(e instanceof HTMLInputElement&&L(U,e.type)){var o=void 0;return e.id&&(n=function(t){return t.htmlFor===e.id},o=(t=_(document.getElementsByTagName("label")))[E(t,n)]),o||(o=ce(e,(function(e){return"label"===e.tagName.toLowerCase()}))),fe(e,o?ie(o):re(e.value))}return""},label:function(e){return ie(e)||de(e)||le(e)},select:function(e){return re(_(e.options).filter((function(e){return e.selected})).map((function(e){return e.label})).join(", ")||e.value)},svg:function(e){var t;return q(e).some((function(e){var n;if(e.nodeType===Node.ELEMENT_NODE&&"use"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase())&&e.hasAttribute("xlink:href"))return t=e,!0})),t?t.getAttribute("xlink:href"):""},textarea:function(){return""},form:function(){return""}},se=function(e,t){if(M(e,K)&&z(e,K))return re(z(e,K));if(M(e,"title")&&z(e,"title"))return re(z(e,"title"));var n=ue[t];if(n)return n(e);var i=ie(e);return i?re(i):function(e){if("svg"===e.tagName)return!1;var t=q(e);return t.length>0&&t.every((function(e){return function(e){if("svg"===e.tagName)return!0;var t=q(e);if(T(t))return!0;var n=te(e);return!(!T(t)&&!n)}(e)}))}(e)&&!ee(e)?re(de(e)):ee(e)?re(le(e)):""},ce=function(e,t){for(var n=e.parentElement;n&&!$(n);){if(t(n))return n;n=n.parentElement}},de=function(e){var t=q(e);return C(t.map((function(e){var t=ie(e);if(te(e)&&t)return t}))).join(" ")},le=function(e){var t;return q(e).some((function(e){var n,i=se(e,null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase());return!!i&&(t=i,!0)})),t},fe=function(e,t){return L(["checkbox","radio"],e.type)?"".concat(t).concat((n=e.checked,"boolean"===O(n)?"("+e.checked+")":"")):t;var n},ge=function e(t,n,i,r,o){void 0===r&&(r=!0),void 0===o&&(o=[]);var a=this;this.originNode=t,this.deviceInfo=n,this.actionType=i,this.trackable=r,this.parentNodes=o,this._getIndex=function(){if(M(a.originNode,X)){var e=z(a.originNode,X);return/^\d{1,10}$/.test(e)&&e-0>0&&2147483647>e-0?+e:void(0>a.actionType.indexOf("circle")&&(s="".concat(e,"，index标记应为 大于 0 且小于 2147483647 的整数！"),console.log("%c [GrowingIO]：".concat(s),"color: #F59E0B;")))}if(L(["dd","dt"],a.tagName)){var t=Y(a.originNode),n=t?q(t):[];if("dl"===t.tagName.toLowerCase()&&n.length>0){if("dd"===a.tagName){var i=E(n,(function(e){return e.isSameNode(a.originNode)}));if(i>-1)return(r=n.slice(0,i).filter((function(e){return"dt"===e.tagName.toLowerCase()}))).length-1+1}if("dt"===a.tagName){var r=n.filter((function(e){return"dt"===e.tagName.toLowerCase()}));return E(r,(function(e){return e.isSameNode(a.originNode)}))+1}}}if(a.isPureList){var o=E(a._pureList,(function(e){return e.isSameNode(a.originNode)}));return o>-1?(a.peerNodes=w([],a._pureList,!0),a.peerNodes.splice(o,1),o+1):void 0}if(a.isPseudoList){var u=E(a._pseudoList,(function(e){return e.isSameNode(a.originNode)}));return u>-1?(a.peerNodes=w([],a._pseudoList,!0),a.peerNodes.splice(u,1),u+1):void 0}var s},this._getSiblingNode=function(e,t){var n,i=Y(e);if(!i)return[];for(var r=null!==(n=m((function(){return _(i.children)})))&&void 0!==n?n:[],o=[],a=0;a<r.length;a++){var u=r[a],s=r[a+1];if(!s||!t(u,s))break;T(o)?o.push(u,s):o.push(s)}return o},this._getIsPureList=function(){var e=a._getSiblingNode(a.originNode,(function(e,t){return e.tagName===t.tagName}));return!(1>e.length||!L(B,a.tagName)||(a._pureList=e,0))},this._getIsInPseudoList=function(){if(L(["th","td"],a.tagName))return!1;var e=a._getSiblingNode(a.originNode,(function(e,t){var n=e.tagName===t.tagName&&e.className===t.className,i=q(e),r=q(t),o=i.every((function(e,t){var n,i;return(null==e?void 0:e.tagName)===(null===(n=r[t])||void 0===n?void 0:n.tagName)&&(null==e?void 0:e.className)===(null===(i=r[t])||void 0===i?void 0:i.className)})),a=i.length===r.length&&o;return n&&a}));return e.length>=3&&(a._pseudoList=e,!0)},this._getClassList=function(e){var t;if(M(e,"name")&&z(e,"name"))return[z(e,"name")];var n=(null!==(t=z(e,"class"))&&void 0!==t?t:"").trim().split(" ");return T(n)?[]:n.filter((function(e){return e&&!W.test(e)&&j.test(e)})).sort()},this._getCurrentXpath=function(){return"/".concat(a.tagName).concat(a.id?"#"+a.id:"").concat(T(a.classList)?"":"."+a.classList.join("."))},this._getIsContainer=function(){return M(a.originNode,J)||L(D,a.tagName)||"input"===a.tagName&&L(k,a.originNode.type)},this._getContent=function(){a.content=se(a.originNode,a.tagName)},this._getIsOutFlow=function(){var e=window.getComputedStyle(a.originNode).position;return L(["fixed","sticky"],e)},this._getRect=function(){var e=a.originNode.getBoundingClientRect(),t=e.top,n=e.bottom,i=e.left,r=e.right-i,o=n-t,u=a.deviceInfo,s=u.winHeight,c=u.winWidth;return t+o>s&&(o=s-t),i+r>c&&(r=c-i),{top:t,left:i,width:r,height:o}},this._getViewStatus=function(){var e=window.getComputedStyle(a.originNode),t=e.opacity,n=e.visibility,i=e.display,r=e.width,o=e.height,u=a.rect,s=u.top,c=u.left,d=u.width,l=u.height,f=a.deviceInfo,g=f.winWidth,v=f.winHeight;if(0===Number(t)||"hidden"===n||"none"===i||"0px"===r||"0px"===o)return"HIDDEN";var h=function(e,t){return document.elementFromPoint(e,t)===a.originNode};return v>s&&g>c&&d>0&&l>0?h(c+d/2,s+l/2)||h(c+1,s+1)||h(c+d-1,s+1)||h(c+1,s+l-1)||h(c+d-1,s+l-1)?"DISPLAYED":0>s+l||0>c+d?"OUTSIDE":"OBSCURED":"OUTSIDE"},this._getTriggerEvent=function(){return"input"===a.tagName&&L(H,a.originNode.type)||L(["select","textarea"],a.tagName)?"VIEW_CHANGE":"VIEW_CLICK"},this._getXParents=function(t,n){var i=t.parentElement,r=[];if(n.length>0)r.push.apply(r,n);else for(;i&&!$(i);)r.push(new e(i,void 0,a.actionType,F(i,a.actionType))),i=i.parentElement;return r},this.tagName=t.tagName.toLocaleLowerCase(),this.classList=this._getClassList(t),this.id=t.id,this.currentXpath=this._getCurrentXpath(),this.isIgnored=M(this.originNode,V),this.isContainer=this._getIsContainer(),this.isPureList=this._getIsPureList(),this.isPseudoList=this._getIsInPseudoList(),this.index=this._getIndex(),this.hyperlink=ae(t,this.tagName),this.content=se(this.originNode,this.tagName),this.triggerEvent=this._getTriggerEvent(),this.isOutFlow=this._getIsOutFlow(),n&&(this.rect=this._getRect(),this.viewStatus=this._getViewStatus()),this.xParents=this._getXParents(t,o)},ve=function e(t,n,i,r,o){var a=this;this.origin=t,this.action=n,this.lengthThreshold=i,this.deviceInfo=r,this.parentNode=o,this.trackNodes=function(){var e;if(!a.trackable)return[];var t=[a.xNode];if(L(["click","circleClick","change"],a.actionType))for(var n=a._getParent();n;){if(!(null==n?void 0:n.xNode)||(null===(e=n.xNode)||void 0===e?void 0:e.isIgnored))return[];n.trackable&&t.push(n.xNode),n=n._getParent()}var i,r=[];return t.reverse().forEach((function(e,n){if(M(e.originNode,J)&&(r=[],i=void 0),b(e.index)&&!b(i)&&(i=e.index),b(i)&&(e.index=i),n===t.length-1)r.push(a.getGioNodeInfo(e));else{var o=e.isPureList||e.isPseudoList;(e.isContainer||o)&&r.push(a.getGioNodeInfo(e))}})),r},this.getGioNodeInfo=function(e){var t=a.computeXpath(e),n=t.skeleton,i=t.fullXpath,r=t.xcontent,o=e.hyperlink,u=e.index,s=e.peerNodes,c=e.content,d=e.triggerEvent,l=e.originNode;return{skeleton:n,xpath:n,fullXpath:i,xcontent:r,hyperlink:o,index:u,peerNodes:null!=s?s:[],content:re(c),triggerEvent:d,originNode:l}},this.computeXpath=function(e){var t,n="/"+e.tagName,i=e.currentXpath,r="/"+((e.id?"#"+e.id:"")+(T(e.classList)?"":"."+e.classList.join("."))||"-");return null===(t=e.xParents)||void 0===t||t.forEach((function(e,t){if(i=e.currentXpath+i,t<a.xpathThreshold-1){n="/"+e.tagName+n;var o=(e.id?"#"+e.id:"")+(T(e.classList)?"":"."+e.classList.join("."));r="/"+(o||"-")+r}})),{skeleton:n,fullXpath:i,xcontent:r}},this._getParent=function(){var t=Y(a.originElement);if(t&&t.nodeName&&!$(t))return new e(t,a.actionType)},this.actionType=L(["circleClick","circleHover","click","change"],n)?n:"click",this.originElement=R(t),this.xpathThreshold=b(i)?i:4,this.trackable=F(this.originElement,this.actionType),this.originElement.isSameNode(t)||(o=null);var u=[];o&&o.xNode&&(u.push(o.xNode),o.xNode.xParents&&u.push.apply(u,o.xNode.xParents)),this.xNode=new ge(this.originElement,this.deviceInfo,this.actionType,this.trackable,u)},he=[],pe=function(e,t){var n,i,r,o,a,u,s,c=this;this.trackNodes=function(e,t){return he=[],c._getTrackElements(e,t,null),he},this._getTrackElements=function(e,t,n){q(e).forEach((function(e){var i,r,o,a,u;if(!(null==e?void 0:e.tagName)||"circle-shape"===(null===(i=null==e?void 0:e.tagName)||void 0===i?void 0:i.toLowerCase())||"heatmap-page"===(null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.toLowerCase())||(null===(o=null==e?void 0:e.id)||void 0===o?void 0:o.indexOf("__vconsole"))>-1||(null===(a=null==e?void 0:e.id)||void 0===a?void 0:a.indexOf("__giokit"))>-1)return!1;var s=new ve(e,"circleClick",c.xpathThreshold,c.deviceInfo,n),d=s.xNode;if(d.zLevel=c._getZLevel(e,t),s.trackable&&L(["DISPLAYED","OBSCURED"],d.viewStatus)){if(t.index&&(d.index=t.index),he.find((function(e){return e.originNode.isSameNode(d.originNode)})))return!1;if("DISPLAYED"===d.viewStatus){var l=c._getGioHybridNodeInfo(s,t);he.push(l)}else"OBSCURED"===d.viewStatus&&d.isContainer&&(l=c._getGioHybridNodeInfo(s,t),he.push(l));if(ne(e)||d.isContainer&&te(e))return!1}T(q(e))||c._getTrackElements(e,null!==(u=s.xNode)&&void 0!==u?u:t,s)}))},this._getZLevel=function(e,t){var n=window.getComputedStyle(e),i=n.position,r=n.zIndex;if("auto"!==r){var o=Number(r||0);return(Number.isNaN(o)?0:o)+t.zLevel}switch(i){case"relative":return t.zLevel+2;case"sticky":return t.zLevel+3;case"absolute":return t.zLevel+4;case"fixed":return t.zLevel+5;default:return t.zLevel+1}},this._getGioHybridNodeInfo=function(e,t){var n=e.xNode,i=n.rect,r=n.zLevel,o=e.getGioNodeInfo(n),a=o.hyperlink,u={};return x(i).forEach((function(e){return u[e]=i[e]*c.deviceInfo.scale})),u.top+=c.deviceInfo.webviewTop,u.left+=c.deviceInfo.webviewLeft,p(p(p({},u),o),{zLevel:r+c.deviceInfo.webviewZLevel,href:a,parentXPath:t.trackable?e.computeXpath(t).xpath:void 0})},this.xpathThreshold=t,this.deviceInfo=(i=(n=e).webviewLeft,r=n.webviewTop,o=n.webviewWidth,a=n.webviewHeight,u=n.webviewZLevel,s=o/window.innerWidth,{winWidth:window.innerWidth,winHeight:window.innerHeight,scale:s,webviewTop:r,webviewLeft:i,webviewWidth:o,webviewHeight:a,webviewZLevel:u})},we=function(e){try{return e()}catch(e){return}},Ne=function(t,n,i,r){void 0===r&&(r={}),document.addEventListener?t.addEventListener(n,i,e(e({},{capture:!0}),r)):t.attachEvent?t.attachEvent("on"+n,i):t["on"+n]=i},me=["VIEW_CLICK","VIEW_CHANGE","FORM_SUBMIT","PAGE","CUSTOM","LOGIN_USER_ATTRIBUTES"],be=["LOGIN_USER_ATTRIBUTES"],ye=["DOMContentLoaded","onreadystatechange"],Ie=["scroll","resize","load","beforeunload","popstate","hashchange","pagehide","unload"],Ee=function(){function t(t){var n,i=this;this.growingIO=t,this.penetrateHybrid=!0,this.onOptionsInit=function(){var e=i.growingIO,t=e.vdsConfig,n=e.emitter;(function(e){return"boolean"===h(e)})(t.penetrateHybrid)&&(i.penetrateHybrid=t.penetrateHybrid),i._initHybridBridge()&&(i.onSendBefore=i.sendBeforeListener,i.hybridConfig.projectId===i.growingIO.vdsConfig.projectId&&(i.growingIO.useHybridInherit=!0)),i.growingIO.useHybridInherit&&(null==n||n.on("SET_USERID",(function(e){var t=e.newUserId,n=e.oldUserId,r=e.userKey;i.penetrateHybrid&&(!t&&n?r?i._clearNativeUserIdAndUserKey():i._clearNativeUserId():r?i._setNativeUserIdAndUserKey(l(t),l(r)):i._setNativeUserId(l(t)))})),null==n||n.on("SET_USERKEY",(function(e){var t=e.newUserKey,n=e.oldUserKey,r=e.userId;i.penetrateHybrid&&(!t&&n?i._clearNativeUserIdAndUserKey():i._setNativeUserIdAndUserKey(l(r),l(t)))})))},this._initHybridBridge=function(){var e,t,n,r=!1;return i.hasHybridBridge=!!window.GrowingWebViewJavascriptBridge,i.hasHybridBridge?((null===(e=null===window||void 0===window?void 0:window.GrowingWebViewJavascriptBridge)||void 0===e?void 0:e.configuration)||(window.GrowingWebViewJavascriptBridge.configuration=JSON.parse(window.GrowingWebViewJavascriptBridge.getConfiguration())),(null===(t=null===window||void 0===window?void 0:window.GrowingWebViewJavascriptBridge)||void 0===t?void 0:t.configuration)&&(i.hybridConfig=null===(n=null===window||void 0===window?void 0:window.GrowingWebViewJavascriptBridge)||void 0===n?void 0:n.configuration),r=!0):N.consoleText("gioHybridAdapter：当前不存在 GrowingWebViewJavascriptBridge，Web模式。","info"),r},this.sendBeforeListener=function(t){var n=t.requestData;if(i.hasHybridBridge){var r=i.processAttributes(e({},n));d(me,r.eventType)&&(d(be,r.eventType)?i.penetrateHybrid&&i._dispatchEvent(r):(i.penetrateHybrid||v(r,["userId","userKey","cs1"]),i._dispatchEvent(r)))}},this.processAttributes=function(e){return g(e,(function(t,n){s(t)||c(t)?g(e[n],(function(t,i){s(t)||c(t)?e[n][i]=JSON.stringify(t):e[n][i]=l(t)})):e[n]=l(t)})),e},this._setNativeUserId=function(e){we((function(){return window.GrowingWebViewJavascriptBridge.setNativeUserId(e)}))},this._clearNativeUserId=function(){we((function(){return window.GrowingWebViewJavascriptBridge.clearNativeUserId()}))},this._setNativeUserIdAndUserKey=function(e,t){we((function(){return window.GrowingWebViewJavascriptBridge.setNativeUserIdAndUserKey(e,t)}))},this._clearNativeUserIdAndUserKey=function(){we((function(){return window.GrowingWebViewJavascriptBridge.clearNativeUserIdAndUserKey()}))},this._dispatchEvent=function(e){we((function(){var t;return null===(t=window.GrowingWebViewJavascriptBridge)||void 0===t?void 0:t.dispatchEvent(JSON.stringify(e))}))},this._getDomTree=function(e,t,n,r,o,a){var u=new pe({webviewLeft:e,webviewTop:t,webviewWidth:n,webviewHeight:r,webviewZLevel:o}).trackNodes(null!=a?a:document.body,{isContainer:!1,zLevel:0}).map((function(e){return v(e,["originNode","peerNodes"]),e})),s=i.growingIO.dataStore.currentPage;return{page:{domain:s.domain,path:s.path,query:s.query,title:s.title},elements:u}};var r=this.growingIO,o=r.emitter,a=r.utils;N=a,o.on("OPTION_INITIALIZED",this.onOptionsInit),null===(n=this.growingIO.emitter)||void 0===n||n.on("SDK_INITIALIZED",(function(){if(window.GrowingWebViewJavascriptBridge){var e=i;window.GrowingWebViewJavascriptBridge.getDomTree=function(){if(arguments.length>=4)return e._getDomTree.apply(this,arguments)},i._addDomChangeListener()}}))}return t.prototype._addDomChangeListener=function(){var e,t=function(t){return void 0===t&&(t=""),function(){var n;"beforeunload"===t&&e&&e.disconnect(),null===(n=window.GrowingWebViewJavascriptBridge)||void 0===n||n.onDomChanged()}};(e=new MutationObserver(t("mutation"))).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),ye.forEach((function(e){Ne(document,e,t(e))})),Ie.forEach((function(e){Ne(window,e,t(e))}))},t}();window.gioHybridAdapter={name:"gioHybridAdapter",method:Ee}}));
