var t=function(){return t=Object.assign||function(t){for(var n,r=1,e=arguments.length;e>r;r++)for(var i in n=arguments[r])({}).hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},t.apply(this,arguments)},n=function(t){return i(["undefined","null"],f(t))},r=function(t){return"object"===f(t)&&!n(t)},e=function(t){return Array.isArray(t)&&"array"===f(t)},i=function(t,n){return("array"===f(t)||"string"===f(t))&&t.indexOf(n)>=0},o=function(t){return n(t)?"":"".concat(t)},u=function(t){return r(t)?Object.keys(t):[]},c=function(t,n){if(!r(t))return!1;try{return"string"===f(n)?delete t[n]:"array"===f(n)?n.map((function(n){return delete t[n]})):(function(t){return"regexp"===f(t)}(n)&&u(t).forEach((function(r){n.test(r)&&c(t,r)})),!0)}catch(t){return!1}},a=function(t){return e(t)?0===t.length:r(t)?0===u(t).length:!t},f=function(t){return{}.toString.call(t).slice(8,-1).toLowerCase()},s=function(t){var i={};return r(t)&&function(t,c){u(t).forEach((function(u){return function(t,u){var c=o(u).slice(0,100);r(t)?i[c]=s(t):e(t)?(i[c]=t.slice(0,100),i[c]=i[c].join("||").slice(0,1e3)):i[c]=n(t)?"":o(t).slice(0,1e3)}(t[u],u)}))}(t),i},l={name:"gioCustomTracking",method:function(l){var v=this;this.growingIO=l,this.getDynamicAttributes=function(t){return n(t)||u(t).forEach((function(n){var u;u=t[n],i(["function","asyncfunction"],f(u))?t[n]=t[n]():r(t[n])?c(t,n):e(t[n])||(t[n]=o(t[n]))})),t},this.buildCustomEvent=function(n,e,i){var o,u;u=function(){var o=v.growingIO.dataStore,u=o.eventContextBuilder,c=o.eventConverter,f=t({eventType:"CUSTOM",eventName:n,attributes:s(v.getDynamicAttributes(r(e)&&!a(e)?e:void 0))},u());a(i)||(f=t(t({},f),i)),c(f)},"string"===f(o=n)&&!a(o)&&o.match(/^[a-zA-Z_][0-9a-zA-Z_]{0,100}$/)?u():console.log("%c [GrowingIO]：事件名格式不正确，只能包含数字、字母和下划线，且不能以数字开头，字符总长度不能超过100!","color: #EF4444;")},this.buildUserAttributesEvent=function(n,r){var e=v.growingIO.dataStore,i=e.eventContextBuilder,o=e.eventConverter,u=t({eventType:"LOGIN_USER_ATTRIBUTES",attributes:s(n)},i());a(r)||(u=t(t({},u),r)),o(u)}}};export{l as default};
