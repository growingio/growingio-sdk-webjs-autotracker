var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)({}).hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var i in t=arguments[n])({}).hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};function n(e,t,n,r){return new(n||(n=Promise))((function(t,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(o,a)}s((r=r.call(e)).next())}))}function r(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function i(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;o>i;i++)!r&&i in t||(r||(r=[].slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||[].slice.call(t))}var o,a,s,u,c=/^(\.ac\.|\.br\.|\.co\.|\.com\.|\.edu\.|\.gov\.|\.org\.|\.net\.)/,d=/^data-gio-track-[a-z]+$/i,g=/^gioTrack(.+)/,l=/^[a-zA-Z][a-zA-Z0-9_]{0,99}$/,f=/.+_gdp_session_id_.{36}/;function v(e){return e&&e.__esModule&&{}.hasOwnProperty.call(e,"default")?e.default:e}var h,p,m,I=v(u?s:(u=1,s="function"==typeof Array.from?Array.from:(a||(a=1,h=function(e){return"function"==typeof e},p=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),9007199254740991)},m=function(e){var t=e.next();return!t.done&&t},o=function(e){var t,n,r,i=this,o=arguments.length>1?arguments[1]:void 0;if(void 0!==o){if(!h(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(t=arguments[2])}var a=function(e,t){if(null!=e&&null!=t){var n=e[t];if(null==n)return;if(!h(n))throw new TypeError(n+" is not a function");return n}}(e,function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf(typeof e)>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}}(e));if(void 0!==a){n=h(i)?Object(new i):[];var s,u,c=a.call(e);if(null==c)throw new TypeError("Array.from requires an array-like or iterable object");for(r=0;;){if(!(s=m(c)))return n.length=r,n;u=s.value,n[r]=o?o.call(t,u,r):u,r++}}else{var d=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var g,l=p(d.length);for(n=h(i)?Object(new i(l)):Array(l),r=0;l>r;)g=d[r],n[r]=o?o.call(t,g,r):g,r++;n.length=l}return n}),o))),w=function(e){return D(["undefined","null"],Q(e))},y=function(e){return"string"===Q(e)},b=function(e){return"number"===Q(e)},O=function(e){return"NaN"===q(Number(e))},S=function(e){return"boolean"===Q(e)},_=function(e){return"object"===Q(e)&&!w(e)},k=function(e){return"regexp"===Q(e)},N=function(e){return D(["function","asyncfunction"],Q(e))},T=function(e){return Array.isArray(e)&&"array"===Q(e)},E=function(e){return"date"===Q(e)},C=function(e){try{return V(e)[0]}catch(e){return}},P=function(e){try{var t=V(e);return t[t.length-1]}catch(e){return}},x=function(e,t){return void 0===t&&(t=1),T(e)&&b(t)?e.slice(t>0?t:1,e.length):e},U=function(e,t){if(void 0===t&&(t=!1),T(e)){for(var n=0,r=[],i=0,o=e;i<o.length;i++){var a=o[i];a&&!J(a)&&(r[n++]=a),t&&0===a&&(r[n++]=a)}return r}return e},A=function(e,t){return e[L(e,t)]},L=function(e,t){var n=-1;return T(e)&&e.every((function(e,r){return!t(e)||(n=r,!1)})),n},D=function(e,t){return("array"===Q(e)||"string"===Q(e))&&("array"===Q(t)?t.some((function(t){return e.indexOf(t)>=0})):e.indexOf(t)>=0)},V=I,q=function(e){return w(e)?"":"".concat(e)},K=function(e,t){return"string"==typeof e?e.split(t):e},H=function(e){if(y(e)){var t=K(e,"");return"".concat(C(t).toLowerCase()).concat(x(t).join(""))}return e},R=function(e,t){return!!y(e)&&e.slice(0,t.length)===t},G=function(e,t){if(y(e)){var n=e.length,r=n;r>n&&(r=n);var i=r;return(r-=t.length)>=0&&e.slice(r,i)===t}return!1},B={}.hasOwnProperty,M=function(e,t){return!w(e)&&B.call(e,t)},j=function(e){return _(e)?Object.keys(e):[]},F=function(e,t){j(e).forEach((function(n){return t(e[n],n)}))},W=function(e,t){var n=j(e);return!(!_(e)||!_(t)||n.length!==j(t).length||D(n.map((function(n){return _(e[n])?W(e[n],t[n]):e[n]===t[n]})),!1))},z=function(e,t){if(!_(e))return!1;try{return"string"===Q(t)?delete e[t]:"array"===Q(t)?t.map((function(t){return delete e[t]})):(k(t)&&j(e).forEach((function(n){t.test(n)&&z(e,n)})),!0)}catch(e){return!1}},J=function(e){return T(e)?0===e.length:_(e)?0===j(e).length:!e},Q=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},X=function(e){if(E(e)){var t=function(e){return 10>e?"0"+e:e};return e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+"."+t(e.getMilliseconds())}return e},Y=Object.freeze({__proto__:null,arrayFrom:V,compact:U,drop:x,dropWhile:function(e,t){return T(e)?e.filter((function(e){return!t(e)})):e},endsWith:G,find:A,findIndex:L,fixed:function(e,t){return b(e)?Number(e.toFixed(b(t)?t:2)):y(e)&&"NaN"!==q(Number(e))?Number(Number(e).toFixed(b(t)?t:2)):e},forEach:F,formatDate:X,get:function(e,t,n){var r=e;return _(e)?(t.split(".").forEach((function(e){r=r?r[e]:n})),r):n},has:M,head:C,includes:D,isArray:T,isBoolean:S,isDate:E,isEmpty:J,isEqual:W,isFunction:N,isNaN:O,isNil:w,isNumber:b,isObject:_,isRegExp:k,isString:y,keys:j,last:P,lowerFirst:H,split:K,startsWith:R,toString:q,typeOf:Q,unset:z,upperFirst:function(e){if(y(e)){var t=K(e,"");return"".concat(C(t).toUpperCase()).concat(x(t).join(""))}return e}}),Z=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},$=function(e,t){console.log("%c [GrowingIO]：".concat(e),{info:"color: #3B82F6;",error:"color: #EF4444;",warn:"color: #F59E0B;",success:"color: #10B981;"}[t]||"")},ee=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];try{return e.apply(void 0,t)}catch(e){return}},te=function(e){for(var t=[],n=1;arguments.length>n;n++)t[n-1]=arguments[n];if(N(e))try{e.apply(void 0,t)}catch(e){$("回调执行失败！".concat(e),"error")}},ne=function(e,t){return!(J(e)||w(e)||!e.name||!N(e.method))||($("插件不合法，跳过加载! ".concat(b(t)?"index"+t:""),"warn"),!1)},re=function(){var e,t=!!(null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.sendBeacon),n=window.navigator.userAgent;if(n.match(/(iPad|iPhone|iPod)/g)){var r=ie(n);return t&&r>13}return t},ie=function(e){var t=e.toLowerCase().match(/cpu.*os (.*?) like mac os/i);return!t||2>t.length?0:+t[1].split("_").slice(0,2).join(".")},oe=function(){var e=window.navigator.userAgent;return/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome\/(\d+\.\d+)/i.test(e)},ae=function(){return/bot|crawler|spider|scrapy|jiankongbao|slurp|transcoder|networkbench/i.test(navigator.userAgent.toLowerCase())},se=function(){return"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")},ue=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n="参数不合法"),$("".concat(t?"调用":"设置"," ").concat(e," 失败，").concat(n,"!"),"warn")},ce=function(e,n,r,i){void 0===i&&(i={}),document.addEventListener?e.addEventListener(n,r,t(t({},{capture:!0}),i)):e.attachEvent?e.attachEvent("on"+n,r):e["on"+n]=r},de=function(e){return G(e,"_gioenc")?e.slice(0,-7):e},ge=function(e){return isNaN(Number(e))&&ee((function(){return JSON.parse(e)}))||e},le=function(e){var t={};return _(e)&&(z(e,"&&sendTo"),F(e,(function(e,n){var r=q(n).slice(0,100);_(e)?t[r]=le(e):T(e)?(t[r]=U(e.slice(0,100),!0),t[r]=t[r].join("||").slice(0,1e3)):E(e)?t[r]=X(e):t[r]=w(e)?"":q(e).slice(0,1e3)}))),t},fe=function(e){return w(e)||j(e).forEach((function(t){N(e[t])?e[t]=ee((function(){return e[t]()})):_(e[t])?z(e,t):T(e[t])||(e[t]=q(e[t]))})),e},ve=function(){var e,t=window._gio_local_vds||"vds";return null!==(e=window[t])&&void 0!==e?e:{}},he=function(e){if(R(e,"?")||D(e,["=","&"])){var n={},r=[];return R(e,"?")&&(e=e.substring(1)),e.split("&").forEach((function(e){var t,i=e.split("="),o=i[0],a=null!==(t=i[1])&&void 0!==t?t:"";w(o)||""===o||(n[o]=a,r.push(o))})),t(t({},n),{__GIO_ORDER__:r})}return decodeURIComponent(e)},pe=function(e,t){if(void 0===t&&(t=!1),"object"===Q(e)){var n="";return(e.__GIO_ORDER__||j(e)).forEach((function(r){"__GIO_ORDER__"!==r&&M(e,r)&&(""===n?n=(t?"?":"")+"".concat(r,"=").concat(e[r]):n+="&".concat(r,"=").concat(e[r]))})),n}if("string"===Q(e))return encodeURIComponent(e)},me=Object.freeze({__proto__:null,addListener:ce,callError:ue,checkPluginItem:ne,compareVersion:function(e,t){for(var n=function(e){return e.replace(/\s+/g,"")},r=function(e){return e.replace(/[vV]/g,"")},i=n(r(e)),o=n(r(t)),a=i.split("."),s=o.split("."),u=0;3>u;u++){var c=Number(a[u]),d=Number(s[u]);if(c>d)return 1;if(d>c)return-1;if(!isNaN(c)&&isNaN(d))return 1;if(isNaN(c)&&!isNaN(d))return-1}return 0},consoleText:$,flattenObject:function(e){void 0===e&&(e={});var n=t({},e);return j(n).forEach((function(e){_(n[e])?(j(n[e]).forEach((function(t){n["".concat(e,"_").concat(t)]=q(n[e][t])})),z(n,e)):T(n[e])?(n[e].forEach((function(t,r){_(t)?j(t).forEach((function(i){n["".concat(e,"_").concat(r,"_").concat(i)]=q(t[i])})):n["".concat(e,"_").concat(r)]=q(t)})),z(n,e)):w(n[e])||""===n[e]?z(n,e):n[e]=q(n[e])})),le(n)},getActualKey:de,getDynamicAttributes:fe,getGioFunction:function(){var e,t,n,r,i=null!==(t=null===(e=ve())||void 0===e?void 0:e.namespace)&&void 0!==t?t:"gdp";return N(window[i])?window[i]:null!==(r=null!==(n=window.gdp)&&void 0!==n?n:window.gio)&&void 0!==r?r:function(){}},getIOSVersion:ie,getMainTrackingId:function(){var e;return null!==(e=ve().trackingId)&&void 0!==e?e:"g0"},getVds:ve,guid:Z,hashCode:function(e,t){void 0===t&&(t=!1);var n=0;if(J(e)||"boolean"==typeof e)return n;for(var r=0;r<e.length;)n=(n<<5)-n+e.charCodeAt(r),n&=n,r++;return t?Math.abs(n):n},isBot:ae,isPromiseSupported:se,isSafari:oe,limitObject:le,niceCallback:te,niceTry:ee,parseStorageValue:ge,queryParse:he,queryStringify:pe,supportBeacon:re}),Ie=function(e){return y(e)&&e.length>0||b(e)&&e>0},we=function(e,t){return y(e)&&!J(e)&&e.match(l)?t():($("事件名格式不正确，只能包含数字、字母和下划线，且不能以数字开头，字符总长度不能超过100!","error"),!1)},ye=["web","wxwv","Android","iOS","minp","alip","baidup","qq","bytedance","kuaishoup","jdp"],be={gsid:"_gdp_sequence_ids",originalSource:"_gdp_original_source",sentSign:"_gdp_session_id_sent",sessionId:"_gdp_session_id",userId:"_gdp_cs1_gioenc",userKey:"_gdp_user_key_gioenc",gioId:"_gdp_gio_id_gioenc",gqs:"_gdp_query_string_gioenc",abts:"_gdp_abt_sid"},Oe={autotrack:{type:"boolean",default:!0},appId:{type:"string",default:""},compress:{type:"boolean",default:!0},cookieDomain:{type:"string",default:""},dataCollect:{type:"boolean",default:!0},debug:{type:"boolean",default:!1},embeddedIgnore:{type:"array",default:[]},embeddedAdapter:{type:"object",default:{circleServerUrl:""}},extraUA:{type:"boolean",default:!0},forceLogin:{type:"boolean",default:!1},idMapping:{type:"boolean",default:!1},enableIdMapping:{type:"boolean",default:!1},gtouchHost:{type:"string",default:""},hashtag:{type:"boolean",default:!1},ignoreFields:{type:"array",default:[]},impressionScale:{type:"number",default:0},originalSource:{type:"boolean",default:!0},packageName:{type:"string",default:""},penetrateHybrid:{type:"boolean",default:!0},performance:{type:"object",default:{monitor:!0,exception:!0}},platform:{type:"string",default:"web"},requestTimeout:{type:"number",default:5e3},rewriteQuery:{type:"boolean",default:!0},sendType:{type:"string",default:"beacon"},serverUrl:{type:"string",default:"https://napi.growingio.com"},sessionExpires:{type:"number",default:30},storageType:{type:"string",default:"cookie"},touch:{type:"boolean",default:!1},trackBot:{type:"boolean",default:!0},trackPage:{type:"boolean",default:!0},version:{type:"string",default:"1.0.0"}},Se=["clearGeneralProps","clearPageAttributes","clearTrackTimer","clearUserId","getABTest","getOption","identify","removeTimer","sendPage","sendVisit","setBeforeSendListener","setGeneralProps","setOption","setPageAttributes","setPageListener","setUserAttributes","setUserId","track","trackTimerEnd","trackTimerPause","trackTimerResume","trackTimerStart"],_e=i(i(["init","registerPlugins"],["getPlugins","getDeviceId","getUserAgent","updateImpression"],!0),Se,!0),ke={autotrack:"无埋点采集",dataCollect:"数据采集",dataSourceId:"数据源ID",debug:"调试模式",extraUA:"增强用户代理",forceLogin:"强制登录",hashtag:"哈希解析",serverUrl:"数据上报服务地址"},Ne=["collectImp","enableDebug","enableHT","getVisitorId","send","setAutotrack","setConfig","setDataCollect","setPlatformProfile","setTrackerHost","setTrackerScheme"],Te=["screenHeight","screenWidth"];function Ee(e){for(var t=1;arguments.length>t;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Ce,Pe=function e(t,n){function r(e,r,i){if("undefined"!=typeof document){"number"==typeof(i=Ee({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=t.read(a,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Ee({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Ee({},this.attributes,t))},withConverter:function(t){return e(Ee({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),xe={A:1,a:1,Z:1,z:1,"@":1,"{":1},Ue=function(e){return w(e)?e:ee((function(){return"gioenc-".concat(Le(e))}))||e},Ae=function(e){return y(e)&&R(e,"gioenc-")&&ee((function(){return Le(e.replace("gioenc-",""))}))||e},Le=function(e){return(e=e||"").split("").map((function(e){return xe[e]?e:De(e)})).join("")},De=function(e){if(/[0-9]/.test(e))return 1^+e;var t=e.charCodeAt(0);return String.fromCharCode(1^t)},Ve=function(e){var t=this;this.domain=e,this.getItem=function(e){return ge(Ae(Pe.get(de(e),{domain:t.domain,path:"/"})))},this.setItem=function(e,n,r){var i;i=y(n)?n.length?G(e,"_gioenc")?Ue(n):n:"":JSON.stringify(n),Pe.set(de(e),i,{expires:new Date(r||new Date((new Date).toDateString()).getTime()+3456e7),domain:t.domain,path:"/"})},this.removeItem=function(e){Pe.remove(de(e),{domain:t.domain,path:"/"})},this.hasItem=function(e){return D(j(Pe.get()),de(e))},this.getKeys=function(){return j(Pe.get())},this.type="Cookie"},qe=function(){this.getItem=function(e){var t=ee((function(){return JSON.parse(localStorage.getItem(de(e))||"")}))||{};return _(t)&&t.expiredAt>+Date.now()?ge(Ae(t.value)):void 0},this.setItem=function(e,t,n){var r=null!=n?n:+new Date((new Date).getFullYear()+3,(new Date).getMonth(),(new Date).getDay()).getTime();localStorage.setItem(de(e),JSON.stringify({value:y(t)&&t.length&&G(e,"_gioenc")?Ue(t):t,expiredAt:r}))},this.removeItem=function(e){return localStorage.removeItem(de(e))},this.hasItem=function(e){return!!localStorage.getItem(de(e))},this.getKeys=function(){return V(Array(localStorage.length)).map((function(e,t){return localStorage.key(t)}))},this.type="localStorage"},Ke={},He=function(){this.getItem=function(e){var t=ee((function(){return JSON.parse(Ke[de(e)]||"")}));return _(t)&&t.expiredAt>+Date.now()?ge(Ae(t.value)):void 0},this.setItem=function(e,t,n){var r=null!=n?n:+new Date((new Date).getFullYear()+3,(new Date).getMonth(),(new Date).getDay()).getTime();Ke[de(e)]=JSON.stringify({value:y(t)&&t.length?Ue(t):t,expiredAt:r})},this.removeItem=function(e){return z(Ke,de(e))},this.hasItem=function(e){return M(Ke,de(e))},this.getKeys=function(){return j(Ke)},this.type="memory"},Re=function(e){var t=[];try{var n=e.split("."),r=P(n);if(n.length>=2&&(isNaN(Number(r))||0>Number(r)||Number(r)>255)){var i=".".concat(n.slice(-2).join("."));c.test(i)?Ce=i:t.push(i);var o=".".concat(n.slice(-3).join("."));c.test(o)||D(t,o)||t.push(o);var a=".".concat(n.slice(-4).join("."));c.test(a)||D(t,a)||t.push(a)}}catch(e){$(e,"error")}return t},Ge=function(e){var t="";return e.some((function(e){return!!Be(e)&&(t=e,!0)})),t},Be=function(e){try{Pe.set("gioCookie","yes",{domain:e});var t=!!Pe.get("gioCookie",{domain:e});return Pe.remove("gioCookie",{domain:e}),t}catch(e){return!1}},Me=function(e){var t,n,r,o=e.storageType,a=e.cookieDomain,s=e.projectId;if(D(["cookie","localstorage"],o)||(o="cookie"),"cookie"===o&&(n=!!(r=navigator.userAgent.indexOf("Electron")>-1||D(["","localhost","127.0.0.1"],window.location.hostname)||!D(["http:","https:"],window.location.protocol)?"":Ge(i(i([],Re(window.location.hostname),!0),[window.location.hostname],!1)))),"cookie"===o&&n){var u=new Ve(r);if(a){var c=Re(a),d=Ge(J(c)?[]:i([a],Re(a),!0));d&&Be(d)?u.domain=d:$("指定Cookie域无效或无权限，使用默认域！","warn")}t=u}else t=function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(e){return!1}}()?new qe:new He;return"cookie"===o&&Ce&&Be(Ce)&&function(e,t,n){if(t&&Be(t)){var r=new Ve(t);["".concat(n,"_gdp_session_id"),"gdp_user_id_gioenc","".concat(n,"_gdp_cs1_gioenc"),"".concat(n,"_gdp_user_key_gioenc"),"".concat(n,"_gdp_gio_id_gioenc"),"".concat(n,"_gdp_sequence_ids"),"".concat(n,"_gdp_session_id_sent")].forEach((function(t){var n=r.getItem(t);r.hasItem(t)&&(e.setItem(t,n),r.removeItem(t))})),r=void 0}}(t,Ce,s),t},je="ON_COMMIT_REQUEST",Fe="ON_COMPOSE_AFTER",We="ON_COMPOSE_BEFORE",ze="ON_ERROR",Je="ON_INSTALL",Qe="ON_SEND_AFTER",Xe="ON_SEND_BEFORE",Ye="OPTION_CHANGE",Ze="OPTION_INITIALIZED",$e="SDK_INITIALIZED",et="SESSIONID_UPDATE",tt="SET_USERID",nt="SET_USERKEY";function rt(e){return n(this,0,void 0,(function(){var t,n,i,o,a,s,u,c;return r(this,(function(r){return t=function(e){var t="";return"64"===e.bitness?"x86"===e.architecture?t="x86_64":"arm"===e.architecture&&(t="aarch64"):"arm"===e.architecture&&"32"===e.bitness&&(t="armv7l"),""===t?"X11; CrOS ".concat(e.platformVersion):"X11; CrOS ".concat(t," ").concat(e.platformVersion)},n=function(e){var t,n,r="";return"x86"===e.architecture&&"64"===e.bitness?r="; Win64; x64":"arm"===e.architecture?r="; ARM":!0===e.wow64&&(r="; WOW64"),"Windows NT ".concat((t=e.platformVersion||"10.0",n=new Map([["0.3.0","6.3"],["0.2.0","6.2"],["0.1.0","6.1"]]),n.has(t)?n.get(t):"undefined"!=typeof navigator&&navigator.userAgentData&&"Windows"===navigator.userAgentData.platform&&parseInt(t.split(".")[0],10)>=13?"13.0":"10.0")).concat(r)},i=function(e){var t="Macintosh; Intel Mac OS X ",n=e.platformVersion||"10_15_7";return n.indexOf(".")>-1&&(n=n.split(".").join("_")),t+n},o=function(e){var t="Linux; Android ";return t+=e.platformVersion,e.model&&(t+="; ",t+=e.model),t},a=function(e){return e.architecture||(e.architecture="x86"),e.bitness||(e.bitness="64"),e.model||(e.model=""),e.platform||(e.platform="Windows"),e.platformVersion||(e.platformVersion="10.0"),e.wow64||(e.wow64=!1),e},navigator.userAgentData?(s=!1,c=RegExp("AppleWebKit/537.36 \\(KHTML, like Gecko\\) Chrome/\\d+.\\d+.\\d+.\\d+ (Mobile )?Safari/537.36"),navigator.userAgentData.brands.forEach((function(e){"Chromium"===e.brand&&(s=c.test(navigator.userAgent),u=e.version)})),s&&u&&parseInt(u,10)>=100?[2,new Promise((function(r){var s;null===(s=navigator.userAgentData)||void 0===s||s.getHighEntropyValues(e).then((function(e){var s,c;if(e){var d={platform:null===(s=navigator.userAgentData)||void 0===s?void 0:s.platform,version:u};e=Object.assign(d,e),e=a(e);var g="Mozilla/5.0 (",l=navigator.userAgent;if(/OpenHarmony/.test(l)){var f=l.match(/\(([^)]*OpenHarmony[^)]*)\)/);if(f&&f[1])g+=f[1];else{var v=l.match(/OpenHarmony\s([\d.]+)/),h=v&&v[1]||e.platformVersion||"";g+="Phone; OpenHarmony ".concat(h).trim()}}else D(["Chrome OS","Chromium OS"],e.platform||"")?g+=t(e):"Windows"===e.platform?g+=n(e):"macOS"===e.platform?g+=i(e):"Android"===e.platform?g+=o(e):g+="X11; Linux x86_64";g+=") AppleWebKit/537.36 (KHTML, like Gecko) Chrome/",g+=function(e,t){var n;return(null===(n=null==e?void 0:e.find((function(e){return D(["Google Chrome","Microsoft Edge","Opera","Chromium"],e.brand)})))||void 0===n?void 0:n.version)||"".concat(t,".0.0.0")}(null==e?void 0:e.fullVersionList,d.version||"100"),(null===(c=navigator.userAgentData)||void 0===c?void 0:c.mobile)&&(g+=" Mobile"),g+=" Safari/537.36";var p=l.indexOf("Safari/537.36");if(-1!==p){var m=p+13,I=l.substring(m);I&&(g+=I)}r(g)}else r("")}))}))]:[2,Promise.resolve(void 0)]):[2,Promise.resolve(void 0)]}))}))}var it=["architecture","bitness","model","platformVersion","fullVersionList","wow64"],ot=["model","platformVersion","fullVersionList"];function at(){return!("undefined"==typeof navigator||!navigator.userAgentData||"function"!=typeof navigator.userAgentData.getHighEntropyValues)}function st(e){return n(this,0,void 0,(function(){var e,t,n;return r(this,(function(r){switch(r.label){case 0:if(!at())return[2,""];t=(null===(n=navigator.userAgentData)||void 0===n?void 0:n.mobile)||!1,e=t?ot:it,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,rt(i([],e,!0))];case 2:return[2,r.sent()||""];case 3:return r.sent(),[2,""];case 4:return[2]}}))}))}var ut=function(){function e(){}return e.isCompatible=function(){return!(!se()||!at())||(e.hasWarnedOnce||($("当前浏览器/环境不支持获取增强UA","warn"),e.hasWarnedOnce=!0),e.cachedUserAgent="",!1)},e.initialize=function(){return n(this,0,void 0,(function(){return r(this,(function(t){return e.initPromise||(e.initPromise=e._doInitialize()),[2,e.initPromise]}))}))},e._doInitialize=function(){return n(this,0,void 0,(function(){var t,n,i,o;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=new Promise((function(t,n){setTimeout((function(){return n(Error("UA获取超时"))}),e.TIMEOUT)})),[4,Promise.race([st(),t])];case 1:return n=r.sent(),e.cachedUserAgent=n||"",[3,3];case 2:return i=r.sent(),e.hasWarnedOnce||(o=i instanceof Error?i.message:"未知错误",$("获取增强UA失败: ".concat(o),"warn"),e.hasWarnedOnce=!0),e.cachedUserAgent="",[3,3];case 3:return[2]}}))}))},e.getUserAgent=function(){return at()&&e.cachedUserAgent||""},e.isInitializing=function(){return null!==e.initPromise},e.cachedUserAgent=null,e.initPromise=null,e.hasWarnedOnce=!1,e.TIMEOUT=1e3,e}(),ct=function(e){var n=this;this.growingIO=e,this.main=function(e,r){var i,o,a;void 0===r&&(r=!0),e||(e=n.growingIO.trackingId);var s=n.growingIO,u=s.sdkVersion,c=s.useEmbeddedInherit,d=s.userStore,g=s.dataStore,l=g.currentPage,f=l.path,v=l.query,h=l.title,p=l.getReferralPage,m=g.getTrackerVds(e),I=null!==(i=ee((function(){return g.lastPageEvent[e]})))&&void 0!==i?i:{},w={appVersion:m.version,dataSourceId:m.dataSourceId,deviceId:d.getUid(),domain:e===c?m.appId:window.location.host,language:navigator.language,path:f,platform:m.platform,query:v,referralPage:p(e)||"",screenHeight:window.screen.height,screenWidth:window.screen.width,sdkVersion:u,sessionId:d.getSessionId(e),timestamp:+Date.now(),timezoneOffset:(new Date).getTimezoneOffset(),title:null!==(a=null!==(o=I.title)&&void 0!==o?o:h)&&void 0!==a?a:ee((function(){return document.title.slice(0,255)})),userId:d.getUserId(e)};if(m.idMapping?w.userKey=d.getUserKey(e):w.userKey="",r&&!J(g.generalProps[e])&&(w.attributes=t({},g.generalProps[e]),J(w.attributes)||(w.attributes=le(fe(t({},w.attributes))))),r){var y=g.getTrackerVds(n.growingIO.trackingId);if(y&&!1!==y.extraUA){var b=ut.getUserAgent();b&&b.trim()&&(w.attributes||(w.attributes={}),w.attributes.$userAgent=b)}}return J(m.ignoreFields)||m.ignoreFields.forEach((function(e){z(w,e)})),c&&e===c&&!J(n.minpExtraParams)&&F(t(t({},w),n.minpExtraParams),(function(e,t){var r,i;D(m.embeddedIgnore,t)?(w[t]=null!==(r=null==m?void 0:m.originValues[t])&&void 0!==r?r:w[t],"domain"===t&&(w[t]=window.location.host)):w[t]=null!==(i=n.minpExtraParams[t])&&void 0!==i?i:w[t]})),w.trackingId=e,w},this.minpExtraParams={}},dt=function(e){var n,r=this;this.growingIO=e,this.parsePage=function(){var e=r.growingIO.vdsConfig.hashtag,t=location.pathname,n=location.search,i=location.hash,o=i.indexOf("?");r.domain=window.location.host,r.title=document.title.slice(0,255),r.time=+Date.now(),r.path=t,r.query=n,e&&(o>-1?(r.path+=i.slice(0,o),r.query=r.query+"&"+i.slice(o+1)):r.path+=i),r.query&&D(["?","&"],r.query.charAt(0))&&(r.query=r.query.slice(1))},this._getNoHashHref=function(){var e=window.location,t=e.protocol,n=e.host,r=e.pathname,i=e.search;return"".concat(t,"://").concat(n).concat(r).concat(i)},this.getReferralPage=function(e){var t,n,i=r.growingIO.dataStore.lastPageEvent[e];return(null==i?void 0:i.path)===r.path&&(null!==(t=null==i?void 0:i.query)&&void 0!==t?t:"")===(null!==(n=r.query)&&void 0!==n?n:"")?null==i?void 0:i.referralPage:(null==i?void 0:i.path)?null==i?void 0:i.nextRefferer:document.referrer},this.handlePage=function(){var e=r.growingIO,t=e.vdsConfig.hashtag,n=e.dataStore,i=window.location.href,o=r.lastHref;t||(i=r._getNoHashHref(),o=r.lastNoHashHref),o!==i&&(r.parsePage(),n.initializedTrackingIds.forEach((function(e){n.sendVerifiedPage(e)})))},this.hookHistory=function(){var e=window.history.pushState,t=window.history.replaceState,n=r;e&&ee((function(){return window.history.pushState=function(){for(var t=[],r=0;arguments.length>r;r++)t[r]=arguments[r];e.apply(window.history,t),setTimeout(n.handlePage)}})),t&&ee((function(){return window.history.replaceState=function(){for(var e=[],r=0;arguments.length>r;r++)e[r]=arguments[r];t.apply(window.history,e),setTimeout(n.handlePage)}})),ce(window,"popstate",r.handlePage),r.growingIO.vdsConfig.hashtag&&ce(window,"hashchange",r.handlePage)},this.eventSetPageProps=function(e,n){var i=ee((function(){return r.pageProps[e][r.path]}));return J(i)?n.attributes:le(t(t({},n.attributes),fe(i)))},this.buildPageEvent=function(e,n){var i=r.growingIO.dataStore,o=i.eventContextBuilder,a=i.eventConverter,s=t(t({eventType:"PAGE"},o(e)),{title:r.title,protocolType:location.protocol.substring(0,location.protocol.length-1),referralPage:r.getReferralPage(e),timestamp:r.time});!J(n)&&n.title&&(s.title=n.title),s.attributes=r.eventSetPageProps(e,s),a(s),r.lastHref=window.location.href,r.lastNoHashHref=r._getNoHashHref(),r.lastLocation=t({},window.location)},this.title=null!==(n=ee((function(){return document.title.slice(0,255)})))&&void 0!==n?n:"",this.lastLocation=t({},window.location),this.pageListeners={},this.pageProps={}},gt=function(e){var n,r=this;this.growingIO=e,this.ALLOW_SETTING_KEYS=Object.keys(Oe),this.trackTimers={},this.getTrackerVds=function(e){return r.growingIO.trackingId===e?t({},r.growingIO.vdsConfig):void 0},this.getKeyPrefix=function(e){return r.growingIO.vdsConfig.projectId},this.getStorageKey=function(e,t){return"".concat(r.getKeyPrefix(e)).concat(be[t])},this.getGsid=function(e){var t,n=r.growingIO.storage.getItem(r.getStorageKey(e,"gsid"))||{},i=Number(n.globalKey);return O(i)||i>=1e9||1>i?(t=1,r.setGsid(e,t)):t=i,t},this.setGsid=function(e,t){var n=O(Number(t))||t>=1e9||1>t?1:t;r.setSequenceIds(e,n)},this.setSequenceIds=function(e,t){var n=r.getStorageKey(e,"gsid"),i=r.growingIO.storage.getItem(n)||{};i.globalKey=t,r.growingIO.storage.setItem(n,i)},this.initTrackerOptions=function(e){var t=r.initOptions(e);return t.trackingId=e.trackingId,r.growingIO.trackingId=e.trackingId,r.growingIO.vdsConfig=t,window[r.growingIO.vdsName]=t,t},this.initOptions=function(e){var n,i,o,a,s,u,c,d=e.projectId,g=e.dataSourceId,l=e.appId,f={};return r.ALLOW_SETTING_KEYS.forEach((function(t){var n=Oe[t].type,r=T(n)?!D(n,Q(e[t])):Q(e[t])!==n;"platform"!==t||D(ye,e[t])||(r=!0),r?f[t]=Oe[t].default:"ignoreFields"===t?f.ignoreFields=e.ignoreFields.filter((function(e){return D(Te,e)})):(f[t]=e[t],D(["dataCollect","autotrack"],t)&&!f[t]&&$("已关闭".concat(ke[t]),"info"))})),e.host&&$("host字段已废弃，指定上报请求地址请使用 serverUrl!","error"),f.sessionExpires=Math.round(f.sessionExpires),(O(f.sessionExpires)||1>f.sessionExpires||f.sessionExpires>360)&&(f.sessionExpires=30),f.storageType=f.storageType.toLowerCase(),f.enableIdMapping&&!f.idMapping&&(f.idMapping=!0),z(f,"enableIdMapping"),f.sendType=f.sendType.toLowerCase(),D(["beacon","xhr","image"],f.sendType)||(f.sendType="beacon"),!f.trackBot&&ae()&&(f.dataCollect=!1),!O(Number(f.requestTimeout))&&f.requestTimeout>0||(f.requestTimeout=5e3),(f.impressionScale>1||0>f.impressionScale)&&(f.impressionScale=0),t(t(t({},null!==(n=window[r.growingIO.vdsName])&&void 0!==n?n:{}),f),{projectId:d,dataSourceId:g,appId:l,performance:{monitor:null===(o=null===(i=f.performance)||void 0===i?void 0:i.monitor)||void 0===o||o,exception:null===(s=null===(a=f.performance)||void 0===a?void 0:a.exception)||void 0===s||s,network:null!==(c=null===(u=f.performance)||void 0===u?void 0:u.network)&&void 0!==c&&c}})},this.setOriginalSource=function(e){var t=r.growingIO,n=t.storage,i=t.userStore,o=n.getItem(r.getStorageKey(e,"sentSign"));if(i.getSessionId(e)!==o&&J(r.getOriginalSource(e))){var a=r.currentPage,s=a.path,u=a.query,c=a.getReferralPage,d={path:s,query:u,referralPage:document.referrer||c(e)};localStorage.setItem(r.getStorageKey(e,"originalSource"),JSON.stringify(d))}},this.getOriginalSource=function(e){return ee((function(){return JSON.parse(localStorage.getItem(r.getStorageKey(e,"originalSource")))}))},this.setOption=function(e,n,i){var o,a=r.growingIO,s=a.emitter,u=a.userStore,c=r.getTrackerVds(e),d=t({},c);r.updateVdsConfig(e,t(t({},c),((o={})[n]=i,o))),"dataCollect"===n&&d.dataCollect!==i&&(i?u.setSessionId(e,Z()):r.growingIO.clearTrackTimer(e)),null==s||s.emit(Ye,{trackingId:e,optionName:n,optionValue:i})},this.getOption=function(e,t){var n=r.getTrackerVds(e);return t&&M(r.growingIO.vdsConfig,t)?M(n,t)?n[t]:r.growingIO.vdsConfig[t]:J(t)||w(t)?n:void ue("getOption > ".concat(t))},this.updateVdsConfig=function(e,n){var i=window[r.growingIO.vdsName];try{e===r.growingIO.trackingId?(r.growingIO.vdsConfig=t(t({},r.growingIO.vdsConfig),n),window[r.growingIO.vdsName]=t(t({},i),r.growingIO.vdsConfig)):(r.growingIO.subInstance[e]=t(t({},r.growingIO.subInstance[e]),n),window[r.growingIO.vdsName].subInstance[e]=t(t({},i.subInstance[e]),r.growingIO.subInstance[e]))}catch(e){$("Internal Error! ".concat(e),"error")}},this.sendVerifiedVisit=function(e,t){var n=r.growingIO,i=n.userStore.getSessionId,o=n.storage.getItem(r.getStorageKey(e,"sentSign")),a=i(e)===o;!t&&a||r.buildVisitEvent(e)},this.sendVerifiedPage=function(e,t){void 0===t&&(t=!1),t&&r.currentPage.parsePage();var n=r.getTrackerVds(e).trackPage,i=r.currentPage,o=i.pageListeners,a=i.path,s=i.query,u=i.title,c=i.buildPageEvent;N(o[e])&&o[e]({path:a,query:s,title:u}),n&&c(e)},this.buildVisitEvent=function(e,n){var i=r.growingIO,o=i.dataStore,a=o.eventContextBuilder,s=o.eventConverter,u=o.currentPage,c=i.emitter,d=i.vdsConfig,g=r.getOriginalSource(e),l=t(t({eventType:"VISIT"},a(e)),{title:u.title,referralPage:document.referrer||r.currentPage.getReferralPage(e),timestamp:u.time-1});d.originalSource&&!w(g)&&(l=t(t({},l),g)),J(n)||F(l,(function(e,t){M(n,t)&&(b(n[t])?l[t]=n[t]:J(n[t])||(l[t]=n[t]||l[t]))})),c.on(Qe,(function(t){var n=t.requestData,i=t.trackingId,o=r.growingIO,a=o.userStore,s=o.storage;if("VISIT"===n.eventType&&e===i){s.setItem(r.getStorageKey(n.trackingId,"sentSign"),n.sessionId),a.setUid(n.deviceId);var u=a.getUserId(i);u&&u===n.userId&&a.setUserId(i,a.getUserId(i));var c=a.getUserKey(i);c&&c===n.userKey&&a.setUserKey(i,a.getUserKey(i));var d=a.getGioId(i);d&&d===n.gioId&&a.setGioId(i,a.getGioId(i)),localStorage.removeItem(r.getStorageKey(i,"originalSource"))}})),s(l)},this.eventConverter=function(e){var n,i,o=r.growingIO.uploader;if(r.getTrackerVds(e.trackingId).dataCollect){e.eventSequenceId=r.getGsid(e.trackingId),"LOGIN_USER_ATTRIBUTES"===e.eventType?z(e,["timezoneOffset","eventSequenceId"]):r.setGsid(e.trackingId,r.getGsid(e.trackingId)+1);var a={};F(e,(function(e,t){var n;if("element"===t){var r=null!==(n=C(e))&&void 0!==n?n:{};F(r,(function(e,t){J(e)&&0!==e||(a[t]=e)}))}else(J(e)||w(e))&&0!==e||(a[t]=e)})),null===(n=r.growingIO.emitter)||void 0===n||n.emit(Fe,{composedEvent:t({},a),trackingId:e.trackingId});var s=r.beforeSendListener[e.trackingId];if(!J(s)&&N(s)){var u=null!==(i=ee((function(){return s(t({},a))})))&&void 0!==i?i:{};_(u)&&!J(u)&&u.eventType&&u.dataSourceId&&(["path","query","title"].forEach((function(e){u[e]&&y(u[e])&&(a[e]=u[e])})),u.attributes&&_(u.attributes)&&(J(u.attributes)?z(a,"attributes"):a.attributes=le(u.attributes)))}o.commitRequest(t(t({},a),{requestId:Z()}))}},this.currentPage=new dt(this.growingIO),this.eventContextBuilderInst=new ct(this.growingIO),this.eventContextBuilder=null===(n=this.eventContextBuilderInst)||void 0===n?void 0:n.main,this.generalProps={},this.beforeSendListener={},this.lastPageEvent={};var i=this.growingIO.emitter;null==i||i.on(je,(function(e){var n=e.eventData,i=e.trackingId;"PAGE"!==n.eventType&&"page"!==n.t||(r.lastPageEvent[i]=t(t({},n),{nextRefferer:window.location.href}))})),this.initializedTrackingIds=[],i.on($e,(function(e){var t=e.trackingId;r.initializedTrackingIds.push(t)})),null==i||i.on(et,(function(e){var t=e.trackingId;D(r.initializedTrackingIds,t)&&(r.growingIO.uploader.hoardingQueue[t]=[],r.currentPage.parsePage(),r.sendVerifiedVisit(t,!0),r.sendVerifiedPage(t,!0))})),this.growingIO.emitter.on(Ye,(function(e){var t=e.optionName,n=e.optionValue;"dataCollect"===t&&!1===n&&r.initializedTrackingIds.forEach((function(e){return r.growingIO.clearTrackTimer(e)}))}))},lt={name:"gioCompress",method:function(e){var t=this;this.growingIO=e,this._compress=function(e,t,n){if(null===e)return"";var r,i,o,a={},s={},u="",c="",d="",g=2,l=3,f=2,v=[],h=0,p=0;for(o=0;o<e.length;o+=1)if(u=e.charAt(o),{}.hasOwnProperty.call(a,u)||(a[u]=l++,s[u]=!0),c=d+u,{}.hasOwnProperty.call(a,c))d=c;else{if({}.hasOwnProperty.call(s,d)){if(256>d.charCodeAt(0)){for(r=0;f>r;r++)h<<=1,p===t-1?(p=0,v.push(n(h)),h=0):p++;for(i=d.charCodeAt(0),r=0;8>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1}else{for(i=1,r=0;f>r;r++)h=h<<1|i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i=0;for(i=d.charCodeAt(0),r=0;16>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1}0==--g&&(g=Math.pow(2,f),f++),delete s[d]}else for(i=a[d],r=0;f>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1;0==--g&&(g=Math.pow(2,f),f++),a[c]=l++,d=u+""}if(""!==d){if({}.hasOwnProperty.call(s,d)){if(256>d.charCodeAt(0)){for(r=0;f>r;r++)h<<=1,p===t-1?(p=0,v.push(n(h)),h=0):p++;for(i=d.charCodeAt(0),r=0;8>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1}else{for(i=1,r=0;f>r;r++)h=h<<1|i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i=0;for(i=d.charCodeAt(0),r=0;16>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1}0==--g&&(g=Math.pow(2,f),f++),delete s[d]}else for(i=a[d],r=0;f>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1;0==--g&&(g=Math.pow(2,f),f++)}for(i=2,r=0;f>r;r++)h=h<<1|1&i,p===t-1?(p=0,v.push(n(h)),h=0):p++,i>>=1;for(;;){if(h<<=1,p===t-1){v.push(n(h));break}p++}return v.join("")},this.compress=function(e){var n=t;return t._compress(e,16,(function(e){return n.f(e)}))},this.compressToUTF16=function(e){var n=t;return null===e?"":t._compress(e,15,(function(e){return n.f(e+32)}))+" "},this.compressToUint8Array=function(e){for(var n=t.compress(e),r=new Uint8Array(2*n.length),i=0,o=n.length;o>i;i++){var a=n.charCodeAt(i);r[2*i]=a>>>8,r[2*i+1]=a%256}return r},this.compressToEncodedURIComponent=function(e){if(null===e)return"";var n=t;return t._compress(e,6,(function(e){return n.keyStrUriSafe.charAt(e)}))},this.pluginVersion="__PLUGIN_VERSION__",this.f=String.fromCharCode,this.keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}},ft={gioprojectid:"projectId",giodatacollect:"dataCollect",gioappid:"domain",giodatasourceid:"dataSourceId",gios:"sessionId",giou:"uid",giocs1:"userId",giouserkey:"userKey",gioappchannel:"appChannel",giodevicebrand:"deviceBrand",giodevicemodel:"deviceModel",giodevicetype:"deviceType",giolanguage:"language",gionetworkstate:"networkState",giooperatingsystem:"operatingSystem",gioplatform:"platform",gioplatformversion:"platformVersion",gioscreenheight:"screenHeight",gioscreenwidth:"screenWidth",giocircleroomid:"circleRoomId"},vt=["gioprojectid","giodatacollect","giodatasourceid","gioplatform","giocircleroomid"],ht=["giodatasourceid","gioplatform","gioappchannel","giodevicebrand","giodevicemodel","giodevicetype","giolanguage","gionetworkstate","giooperatingsystem","gioplatformversion","gioscreenheight","gioscreenwidth"],pt=i(i(["gioappid","gioprojectid","giodatacollect","giocircleroomid"],["giocs1","gios","giou","giouserkey"],!0),ht,!0),mt="gdp_query_string",It="gdp_circle_error",wt={name:"gioEmbeddedAdapter",method:function(e){var n=this;this.growingIO=e,this.pluginVersion="__PLUGIN_VERSION__",this.options={},this.searchQs={},this.hashQs={},this.gqs={},this.customerQs={},this.qsFrom="search",this.circleOpen=!1,this.circleServerUrl={},this.onOptionsInit=function(e,t){var r,i,o=t.projectId,a=t.appId,s=e===n.growingIO.trackingId?t.hashtag:n.growingIO.vdsConfig.hashtag,u=n.getGQS(s);if(D(["search","hash"],n.qsFrom)&&!J(u)&&n.storage.setItem(mt,u),!n.growingIO.useEmbeddedInherit&&"none"!==n.qsFrom&&u.gioprojectid===o&&u.gioappid===a){n.growingIO.useEmbeddedInherit=e,n.growingIO.dataStore.updateVdsConfig(e,{minipLink:!0}),u.giocircleroomid?n.circleInit(u.giocircleroomid,t):n.storage.removeItem(It);var c=n.growingIO.dataStore.getTrackerVds(e);vt.forEach((function(e){if(M(u,e))if("giodatacollect"===e)c.dataCollect=D(["true",!0],u.giodatacollect);else{var t=ft[e];D(["domain","platform"],t)&&(c.originValues||(c.originValues={}),c.originValues[t]=c[t]),c[t]=u[e]}})),n.growingIO.dataStore.updateVdsConfig(e,c);var d=n.growingIO,g=d.userStore,l=d.dataStore.eventContextBuilderInst;g.setUid(u.giou),g.setSessionId(e,u.gios),g.setUserId(e,null!==(r=u.giocs1)&&void 0!==r?r:""),g.setUserKey(e,null!==(i=u.giouserkey)&&void 0!==i?i:"");var f=window.setInterval((function(){g.setSessionId(e,u.gios)}),.8*t.sessionExpires*60*1e3);window.onbeforeunload=function(){window.clearInterval(f),f=void 0},ht.forEach((function(e){M(u,e)&&(l.minpExtraParams[ft[e]]=u[e])}));var v=n.growingIO.setUserId;n.growingIO.setUserId=function(){for(var t=[],n=0;arguments.length>n;n++)t[n]=arguments[n];if(t[0]!==e)return v.apply(this,t)};var h=n.growingIO.clearUserId;if(n.growingIO.clearUserId=function(){for(var t=[],n=0;arguments.length>n;n++)t[n]=arguments[n];if(t[0]!==e)return h.apply(this,t)},M(u,"giodatacollect")){var p=n.growingIO.setOption;n.growingIO.setOption=function(){for(var t=[],n=0;arguments.length>n;n++)t[n]=arguments[n];if(t[0]!==e)return p.apply(this,t)}}}!1!==n.growingIO.dataStore.getTrackerVds(n.growingIO.trackingId).rewriteQuery&&n.gioURLRewrite(),n.growingIO.dataStore.currentPage.parsePage()},this.getGQS=function(e){var r=window.location.search,i=window.location.hash,o=e?i.substring(i.indexOf("?")+1):"",a=n.storage.getItem(mt),s=he(r),u=he(o),c={};if(M(s,"gioprojectid"))c=s,n.qsFrom="search";else if(M(u,"gioprojectid"))c=u,n.qsFrom="hash";else{if(!M(a,"gioprojectid"))return n.qsFrom="none",{};c=a,n.qsFrom="local"}var d={},g={};return j(c).forEach((function(e){var t=e.toLowerCase();if(D(pt,t)){var n=decodeURIComponent(c[e]);D(["","undefined","null",void 0,null],n)?d[t]="":d[t]=!!D(["true","TRUE",!0],n)||!D(["false","FALSE",!1],n)&&n}else g[e]=c[e]})),n.gqs=d,n.customerQs=g,t(t({},n.gqs),n.customerQs)},this.gioURLRewrite=function(){var e=n.growingIO.vdsConfig.hashtag,t=window.location.search,r=window.location.hash,i=!1;if("search"===n.qsFrom&&(t=pe(n.customerQs,!0),i=!0),e&&"hash"===n.qsFrom&&(r="".concat(r.split("?")[0]).concat(pe(n.customerQs,!0)),i=!0),i){var o="".concat(window.location.pathname).concat(t||"").concat(r||"");window.history.replaceState(null,document.title,o)}},this.circleInit=function(e,t){var r,i;$("您已进入小程序圈选模式","info"),n.circleRoomId=e,n.circleOpen=!0;var o=n.growingIO.useEmbeddedInherit;n.circleServerUrl={};var a=(null===(r=null==t?void 0:t.embeddedAdapter)||void 0===r?void 0:r.circleServerUrl)||(null===(i=n.options)||void 0===i?void 0:i.circleServerUrl);a?y(a)?n.generateUrl(o,a):_(a)&&j(a).forEach((function(e){n.generateUrl(e,a[e])})):n.generateUrl(o,"portal.growingio.com"),n.growingIO.emitter.on(Qe,n.collectorSendFn)},this.generateUrl=function(e,t){R(t,"http")?n.circleServerUrl[e]="".concat(t,"/api/public/circle-room/collect?roomId=").concat(n.circleRoomId):n.circleServerUrl[e]="https://".concat(t,"/api/public/circle-room/collect?roomId=").concat(n.circleRoomId)},this.collectorSendFn=function(e){var r=e.requestData,i=e.trackingId,o=t({},r);n.circleOpen&&"CUSTOM"!==o.eventType&&i===n.growingIO.useEmbeddedInherit&&(z(o,["requestType","trackingId","requestId"]),n.circleRequest(i,o))},this.circleRequest=function(e,t){var r,i,o=new XMLHttpRequest;o.open("POST",n.circleServerUrl[e],!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onload=o.ontimeout=o.onerror=o.onabort=function(e){var t=e.target,r=t.status,i=ee((function(){return JSON.parse(t.responseText)}));D([200,204],r)&&(null==i?void 0:i.success)||(n.circleClose(),n.storage.getItem(It)!==n.circleRoomId&&(n.storage.setItem(It,n.circleRoomId),alert("H5："+((null==i?void 0:i.message)||i||t.responseText||"圈选请求失败，请重试!"))))},o.timeout=null!==(i=null===(r=n.options)||void 0===r?void 0:r.requestTimeout)&&void 0!==i?i:5e3,o.send(JSON.stringify([t]))},this.circleClose=function(){n.circleOpen=!1,n.circleServerUrl={},n.growingIO.emitter.off(Qe,n.collectorSendFn);var e=n.storage.getItem(mt);z(e,["giocircleserverurl","giocircleroomid"]),n.storage.setItem(mt,e)},this.storage=new qe,this.growingIO.emitter.on(Ze,(function(e){var t=e.trackingId,r=e.vdsConfig;n.onOptionsInit(t,r)}))}},yt=function(){return yt=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var i in t=arguments[n])({}).hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},yt.apply(this,arguments)};function bt(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;o>i;i++)!r&&i in t||(r||(r=[].slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||[].slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var Ot,St,_t,kt=function(e){try{return e()}catch(e){return}},Nt=function(e){return"number"===Dt(e)},Tt=function(e){return"object"===Dt(e)&&!function(e){return Pt(["undefined","null"],Dt(e))}(e)},Et=function(e){return Array.isArray(e)&&"array"===Dt(e)},Ct=function(e,t){if(Et(e))for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},Pt=function(e,t){return("array"===Dt(e)||"string"===Dt(e))&&e.indexOf(t)>=0},xt=I,Ut=function(e){return Tt(e)?Object.keys(e):[]},At=function(e){return Et(e)?0===e.length:Tt(e)?0===Ut(e).length:!e},Lt=function(e){if(Et(e)){for(var t=0,n=[],r=0,i=e;r<i.length;r++){var o=i[r];o&&!At(o)&&(n[t++]=o)}return n}return e},Dt=function(e){return{}.toString.call(e).slice(8,-1).toLowerCase()},Vt=["body","br","canvas","clippath","defs","desc","g","hr","html","iframe","math","param","path","rect","script","style","text","title","tspan","use"],qt=["button","reset","submit"],Kt=bt(bt([],qt,!0),["file"],!1),Ht=["checkbox","color","radio","range"],Rt=bt(bt([],Ht,!0),["date","datetime-local","month","number","password","text","time","week"],!1),Gt=["tr","li","dt","dd"],Bt=bt(["a","button","dl"],Gt,!0),Mt=["i","em","svg","img"],jt=["i","span","em","b","strong","bdo"],Ft=/(^| |[^ ]+\-)(clear|clearfix|active|hover|enabled|current|selected|unselected|hidden|display|focus|disabled|undisabled|open|checked|unchecked|undefined|null|ng-|growing-)[^\. ]*/g,Wt=/^([a-zA-Z\-\_0-9]+)$/,zt="data-growing-ignore",Jt="data-growing-container",Qt="data-growing-index",Xt="data-growing-title",Yt=function(e,t){var n;return null!==(n=kt((function(){return e.hasAttribute(t)&&"false"!==e.getAttribute(t)})))&&void 0!==n?n:kt((function(){return e.hasOwnPerporty(t)}))},Zt=function(e,t){var n;return null!==(n=kt((function(){return e.getAttribute(t)})))&&void 0!==n?n:kt((function(){return e.attributes[t].value}))},$t=function(e){var t,n=!Pt(Vt,e.tagName.toLowerCase()),r=rn(e);if(n){if(r&&Pt(jt,null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())&&xt(e.childNodes).filter((function(e){return e.nodeType!==Node.COMMENT_NODE})).every((function(e){return e.nodeType===Node.TEXT_NODE}))){var i=$t(r);return[Et(i)?i[0]:i,!0]}return[e,!1]}return[e,!1]},en=function(e,t,n){if(void 0===n&&(n=0),!e.children)return!1;if("svg"===e.tagName.toLocaleLowerCase())return n>t;if(n>t)return!0;for(var r=0;r<e.children.length;r++){var i=e.children[r];if(en(i,t,n+1))return!0}return!1},tn=function(e,t){var n=e.tagName.toLowerCase();if(!(e instanceof HTMLElement||e instanceof Element))return!1;if(Yt(e,zt))return!1;if(Pt(Vt,n))return!1;if(Pt(["circleClick","circleHover","click"],t)){if("textarea"===n&&"click"===t)return!1;if("input"===n){if("click"===t&&!Pt(Kt,Zt(e,"type")))return!1;if(Pt(["circleClick","circleHover"],t)&&!Pt(bt(bt([],Kt,!0),Rt,!0),Zt(e,"type")))return!1}if(!an(e)&&en(e,5))return!1}return!0},nn=function(e,t){return void 0===t&&(t=!1),xt((null==e?void 0:e.childNodes)||[]).filter((function(e){return Pt(t?[Node.ELEMENT_NODE,Node.TEXT_NODE]:[Node.ELEMENT_NODE],e.nodeType)}))},rn=function(e){return on(e.parentElement)?null:e.parentElement},on=function(e){return!e||Pt(["BODY","HTML","#document"],e.tagName)},an=function(e){return Yt(e,Jt)||Pt(Bt,e.tagName.toLowerCase())||"input"===e.tagName.toLowerCase()&&Pt(qt,e.type)},sn=function(e){var t=nn(e);return!At(t)&&t.every((function(e){var t=cn(e),n=Pt(e.classList,"icon");return!(!t&&!n||un(e))}))},un=function(e){var t=nn(e,!0);return!At(t)&&t.every((function(e){var t=e.nodeType===Node.TEXT_NODE,n=dn(e);return!(!t||!n)}))},cn=function(e){return Pt(Mt,e.tagName.toLocaleLowerCase())},dn=function(e){var t=nn(e,!0).filter((function(e){var t;return e.nodeType===Node.TEXT_NODE||Pt(jt,null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return gn(e.textContent,e.textContent.length)}));return gn(Lt(t).join(" "))},gn=function(e,t){return void 0===t&&(t=50),e&&(null==(e=e.replace(/[\n \t]+/g," ").trim())?void 0:e.length)?e.slice(0,Nt(t)&&t>0?t:void 0):""},ln=/[^/]*\.(bmp|jpg|jpeg|png|gif|svg|psd|webp|apng)/gi,fn=function(e,t){switch(t){case"a":return function(e){if(Yt(e,"href")){var t=Zt(e,"href");if(t&&0!==t.indexOf("javascript"))return[t.slice(0,320),t]}return["",""]}(e);case"img":return function(e){var t=e.src;if(t&&-1===t.indexOf("data:image")){var n=t.match(ln),r=At(n)?"":n[0];if(r.indexOf("%")>-1){var i=function(e){var t=-1;if(Et(e))for(var n=0;n<e.length;n++)"%"===e[n]&&(t=n);return t}(r.split(""));r=r.substring(i+3,r.length)}return[t.slice(0,320),r]}return["",""]}(e);default:return["",""]}},vn={a:function(e){return dn(e)||mn(e)||fn(e,"a")[0]},button:function(e){return Zt(e,"name")||dn(e)||mn(e)||In(e)},img:function(e){return gn(Zt(e,"alt"))||fn(e,"img")[1]},input:function(e){if("password"===e.type)return"";var t,n,r=e instanceof HTMLInputElement&&Pt(Kt,e.type),i=Yt(e,"data-growing-track");if(r||i)return gn(e.value);if(e instanceof HTMLInputElement&&Pt(Ht,e.type)){var o=void 0;return e.id&&(n=function(t){return t.htmlFor===e.id},o=(t=xt(document.getElementsByTagName("label")))[Ct(t,n)]),o||(o=pn(e,(function(e){return"label"===e.tagName.toLowerCase()}))),wn(e,o?dn(o):gn(e.value))}return""},label:function(e){return dn(e)||mn(e)||In(e)},select:function(e){return gn(xt(e.options).filter((function(e){return e.selected})).map((function(e){return e.label})).join(", ")||e.value)},svg:function(e){var t;return nn(e).some((function(e){var n;if(e.nodeType===Node.ELEMENT_NODE&&"use"===(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase())&&e.hasAttribute("xlink:href"))return t=e,!0})),t?t.getAttribute("xlink:href"):""},textarea:function(){return""},form:function(){return""}},hn=function(e,t){if(Yt(e,Xt)&&Zt(e,Xt))return gn(Zt(e,Xt));if(Yt(e,"title")&&Zt(e,"title"))return gn(Zt(e,"title"));var n=vn[t];if(n)return n(e);var r=dn(e);return r?gn(r):function(e){if("svg"===e.tagName)return!1;var t=nn(e);return t.length>0&&t.every((function(e){return function(e){if("svg"===e.tagName)return!0;var t=nn(e);if(At(t))return!0;var n=un(e);return!(!At(t)&&!n)}(e)}))}(e)&&!sn(e)?gn(mn(e)):sn(e)?gn(In(e)):""},pn=function(e,t){for(var n=e.parentElement;n&&!on(n);){if(t(n))return n;n=n.parentElement}},mn=function(e){var t=nn(e);return Lt(t.map((function(e){var t=dn(e);if(un(e)&&t)return t}))).join(" ")},In=function(e){var t;return nn(e).some((function(e){var n,r=hn(e,null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase());return!!r&&(t=r,!0)})),t},wn=function(e,t){return Pt(["checkbox","radio"],e.type)?"".concat(t).concat((n=e.checked,"boolean"===Dt(n)?"("+e.checked+")":"")):t;var n},yn=function e(t,n,r,i,o){void 0===i&&(i=!0),void 0===o&&(o=[]);var a,s=this;this.originNode=t,this.deviceInfo=n,this.actionType=r,this.isTrackable=i,this.parentNodes=o,this.isLimitViewport=!0,this._getIndex=function(){if(Yt(s.originNode,Qt)){var e=Zt(s.originNode,Qt);return/^\d{1,10}$/.test(e)&&e-0>0&&2147483647>e-0?+e:void(0>s.actionType.indexOf("circle")&&(u="".concat(e,"，index标记应为 大于 0 且小于 2147483647 的整数！"),console.log("%c [GrowingIO]：".concat(u),"color: #F59E0B;")))}if(Pt(["dd","dt"],s.tagName)){var t=rn(s.originNode),n=t?nn(t):[];if("dl"===t.tagName.toLowerCase()&&n.length>0){if("dd"===s.tagName){var r=Ct(n,(function(e){return e.isSameNode(s.originNode)}));if(r>-1)return(i=n.slice(0,r).filter((function(e){return"dt"===e.tagName.toLowerCase()}))).length-1+1}if("dt"===s.tagName){var i=n.filter((function(e){return"dt"===e.tagName.toLowerCase()}));return Ct(i,(function(e){return e.isSameNode(s.originNode)}))+1}}}if(s.isPureList){var o=Ct(s._pureList,(function(e){return e.isSameNode(s.originNode)}));return o>-1?(s.peerNodes=bt([],s._pureList,!0),s.peerNodes.splice(o,1),o+1):void 0}if(s.isPseudoList){var a=Ct(s._pseudoList,(function(e){return e.isSameNode(s.originNode)}));return a>-1?(s.peerNodes=bt([],s._pseudoList,!0),s.peerNodes.splice(a,1),a+1):void 0}var u},this._getSiblingNode=function(e,t){var n,r=rn(e);if(!r)return[];for(var i=null!==(n=kt((function(){return xt(r.children)})))&&void 0!==n?n:[],o=[],a=0;a<i.length;a++){var s=i[a],u=i[a+1];if(!u||!t(s,u))break;At(o)?o.push(s,u):o.push(u)}return o},this._getIsPureList=function(){var e=s._getSiblingNode(s.originNode,(function(e,t){return e.tagName===t.tagName}));return!(1>e.length||!Pt(Gt,s.tagName)||(s._pureList=e,0))},this._getIsInPseudoList=function(){if(Pt(["th","td"],s.tagName))return!1;var e=s._getSiblingNode(s.originNode,(function(e,t){var n=e.tagName===t.tagName&&e.className===t.className,r=nn(e),i=nn(t),o=r.every((function(e,t){var n,r;return(null==e?void 0:e.tagName)===(null===(n=i[t])||void 0===n?void 0:n.tagName)&&(null==e?void 0:e.className)===(null===(r=i[t])||void 0===r?void 0:r.className)})),a=r.length===i.length&&o;return n&&a}));return e.length>=3&&(s._pseudoList=e,!0)},this._getClassList=function(e){var t;if(Yt(e,"name")&&Zt(e,"name"))return[Zt(e,"name")];var n=(null!==(t=Zt(e,"class"))&&void 0!==t?t:"").trim().split(" ");return At(n)?[]:n.filter((function(e){return e&&!Ft.test(e)&&Wt.test(e)})).sort()},this._getCurrentXpath=function(){return"/".concat(s.tagName).concat(s.id?"#"+s.id:"").concat(At(s.classList)?"":"."+s.classList.join("."))},this._getIsContainer=function(){return Yt(s.originNode,Jt)||Pt(Bt,s.tagName)||"input"===s.tagName&&Pt(qt,s.originNode.type)},this._getContent=function(){s.content=hn(s.originNode,s.tagName)},this._getIsOutFlow=function(){var e=window.getComputedStyle(s.originNode).position;return Pt(["fixed","sticky"],e)},this._getRect=function(){var e=s.originNode.getBoundingClientRect(),t=e.top,n=e.bottom,r=e.left,i=e.right-r,o=n-t,a=s.deviceInfo,u=a.winHeight,c=a.winWidth;return t+o>u&&(o=u-t),r+i>c&&(i=c-r),{top:t,left:r,width:i,height:o}},this._getListItemViewStatus=function(){var e=s.parentNodes.find((function(e){var t=e.originNode,n=t.scrollHeight,r=t.scrollWidth,i=t.clientHeight,o=t.clientWidth,a=e.rect,s=a.width,u=a.height;return i!==n&&n>u||o!==r&&r>s}));if(e){var t=e.rect,n=t.top,r=t.left,i=t.width,o=t.height,a=s.rect,u=a.top,c=a.left,d=a.width,g=a.height;return n>u+g||c>r+i||u>n+o||r>c+d?"OUTSIDE":u>=n&&c>=r&&n+o>u+g&&r+i>c+d?"DISPLAYED":"OBSCURED"}return""},this._getViewStatus=function(e){var t=window.getComputedStyle(s.originNode),n=t.opacity,r=t.visibility,i=t.display,o=t.width,a=t.height,u=s.rect,c=u.top,d=u.left,g=u.width,l=u.height,f=s.deviceInfo,v=f.winWidth,h=f.winHeight;if(0===Number(n)||"hidden"===r||"none"===i||"0px"===o||0===s.originNode.offsetWidth||"0px"===a||0===s.originNode.offsetHeight)return"HIDDEN";var p=bt([],e,!0).find((function(e){return e.isTrackable&&"DISPLAYED"===e.viewStatus}));if(p)return p.viewStatus;if(s.isPureList||s.isPseudoList){var m=s._getListItemViewStatus();if(m)return m}var I=function(e,t){return document.elementFromPoint(e,t)===s.originNode};return h>c&&v>d&&g>0&&l>0?I(d+g/2,c+l/2)||I(d+1,c+1)||I(d+g-1,c+1)||I(d+1,c+l-1)||I(d+g-1,c+l-1)?"DISPLAYED":s.isLimitViewport&&(0>c+l||0>d+g)?"OUTSIDE":"OBSCURED":"OUTSIDE"},this._getTriggerEvent=function(){return"input"===s.tagName&&Pt(Rt,s.originNode.type)||Pt(["select","textarea"],s.tagName)?"VIEW_CHANGE":"VIEW_CLICK"},this._getXParents=function(t,n){var r=t.parentElement,i=[];if(n.length>0)i.push.apply(i,n);else if(r&&!on(r)){var o=new e(r,void 0,s.actionType,tn(r,s.actionType));i.push(o),o.xParents&&i.push.apply(i,o.xParents)}return i},this.tagName=t.tagName.toLocaleLowerCase(),this.classList=this._getClassList(t),this.id=t.id,this.currentXpath=this._getCurrentXpath(),this.isIgnored=Yt(this.originNode,zt),this.isContainer=this._getIsContainer(),this.isPureList=this._getIsPureList(),this.isPseudoList=this._getIsInPseudoList(),this.index=this._getIndex(),this.hyperlink=fn(t,this.tagName)[0],this.content=hn(this.originNode,this.tagName),this.triggerEvent=this._getTriggerEvent(),this.isOutFlow=this._getIsOutFlow(),n&&(this.isLimitViewport=null===(a=n.isLimitViewport)||void 0===a||a,this.rect=this._getRect(),this.viewStatus=this._getViewStatus(o)),this.xParents=this._getXParents(t,o)},bn=function e(t,n,r,i,o){var a=this;this.origin=t,this.action=n,this.lengthThreshold=r,this.deviceInfo=i,this.parentNode=o,this.trackNodes=function(){var e;if(!a.isTrackable)return[];var t=[a.xNode];if(Pt(["click","circleClick","change"],a.actionType))for(var n=a._getParent();n;){if(!(null==n?void 0:n.xNode)||(null===(e=n.xNode)||void 0===e?void 0:e.isIgnored))return[];n.isTrackable&&t.push(n.xNode),n=n._getParent()}var r,i=[];return t.reverse().forEach((function(e,n){if(Yt(e.originNode,Jt)&&(i=[],r=void 0),Nt(e.index)&&!Nt(r)&&(r=e.index),Nt(r)&&(e.index=r),n===t.length-1)i.push(a.getGioNodeInfo(e));else{var o=e.isPureList||e.isPseudoList;(e.isContainer||o)&&i.push(a.getGioNodeInfo(e))}})),i},this.getGioNodeInfo=function(e){var t=a.computeXpath(e),n=t.skeleton,r=t.fullXpath,i=t.xcontent,o=e.hyperlink,s=e.index,u=e.peerNodes,c=e.content,d=e.triggerEvent,g=e.originNode;return{skeleton:n,xpath:n,fullXpath:r,xcontent:i,hyperlink:o,index:s,peerNodes:null!=u?u:[],content:gn(c),triggerEvent:d,originNode:g}},this.computeXpath=function(e){var t,n="/"+e.tagName,r=e.currentXpath,i="/"+((e.id?"#"+e.id:"")+(At(e.classList)?"":"."+e.classList.join("."))||"-");return null===(t=e.xParents)||void 0===t||t.forEach((function(e,t){if(r=e.currentXpath+r,t<a.xpathThreshold-1){n="/"+e.tagName+n;var o=(e.id?"#"+e.id:"")+(At(e.classList)?"":"."+e.classList.join("."));i="/"+(o||"-")+i}})),{skeleton:n,fullXpath:r,xcontent:i}},this._getParent=function(){var t=rn(a.originElement);if(t&&t.nodeName&&!on(t))return new e(t,a.actionType)},this.actionType=Pt(["circleClick","circleHover","click","change"],n)?n:"click";var s=$t(t),u=s[0],c=s[1];this.originElement=u,this.isUpgrade=c,this.xpathThreshold=Nt(r)?r:4,this.isTrackable=tn(this.originElement,this.actionType),this.originElement.isSameNode(t)||(o=null);var d=[];o&&o.xNode&&(d.push(o.xNode),o.xNode.xParents&&d.push.apply(d,o.xNode.xParents)),this.xNode=new yn(this.originElement,this.deviceInfo,this.actionType,this.isTrackable,d)},On=[],Sn=function(e,t){var n,r,i,o,a,s,u,c=this;this.trackNodes=function(e,t,n){return void 0===n&&(n=!1),On=[],c._getTrackElements(e,t,null,n),On},this._getTrackElements=function(e,t,n,r){void 0===r&&(r=!1),nn(e).forEach((function(e){var i,o,a,s;if(!(null==e?void 0:e.tagName)||Pt(["circle-shape","circle-page","heatmap-page"],null===(i=null==e?void 0:e.tagName)||void 0===i?void 0:i.toLowerCase())||(null===(o=null==e?void 0:e.id)||void 0===o?void 0:o.indexOf("__vconsole"))>-1||(null===(a=null==e?void 0:e.id)||void 0===a?void 0:a.indexOf("__giokit"))>-1)return!1;var u=new bn(e,"circleClick",c.xpathThreshold,c.deviceInfo,n),d=u.xNode;if(d.zLevel=c._getZLevel(e,t),console.log(u,"-----\x3ecgNode"),u.isTrackable&&(Pt(["DISPLAYED","OBSCURED"],d.viewStatus)||r)){if(t.index&&(d.index=t.index),On.find((function(e){return e.originNode.isSameNode(d.originNode)})))return!1;if("DISPLAYED"===d.viewStatus){var g=c._getGioHybridNodeInfo(u,t);On.push(g)}else"OBSCURED"===d.viewStatus&&(d.isContainer||r)&&(g=c._getGioHybridNodeInfo(u,t),On.push(g));if(cn(e)||d.isContainer&&un(e))return!1}At(nn(e))||c._getTrackElements(e,null!==(s=u.xNode)&&void 0!==s?s:t,u,r)}))},this._getZLevel=function(e,t){var n=window.getComputedStyle(e),r=n.position,i=n.zIndex;if("auto"!==i){var o=Number(i||0);return(Number.isNaN(o)?0:o)+t.zLevel}switch(r){case"relative":return t.zLevel+2;case"sticky":return t.zLevel+3;case"absolute":return t.zLevel+4;case"fixed":return t.zLevel+5;default:return t.zLevel+1}},this._getGioHybridNodeInfo=function(e,t){var n=e.xNode,r=n.rect,i=n.zLevel,o=e.getGioNodeInfo(n),a=o.hyperlink,s={};return Ut(r).forEach((function(e){return s[e]=r[e]*c.deviceInfo.scale})),s.top+=c.deviceInfo.webviewTop,s.left+=c.deviceInfo.webviewLeft,yt(yt(yt({},s),o),{zLevel:i+c.deviceInfo.webviewZLevel,href:a,parentXPath:t.isTrackable?e.computeXpath(t).xpath:void 0})},this.xpathThreshold=t,this.deviceInfo=(r=(n=e).webviewLeft,i=n.webviewTop,o=n.webviewWidth,a=n.webviewHeight,s=n.webviewZLevel,u=n.isLimitViewport,{winWidth:o,winHeight:a,scale:o/window.innerWidth,webviewTop:i,webviewLeft:r,webviewWidth:o,webviewHeight:a,webviewZLevel:s,isLimitViewport:u})},_n=function(){function e(e){this.handler=e;var t=navigator.userAgent,n=/chrome/i.exec(t),r=/android/i.exec(t);this.hasTouch="ontouchstart"in window&&!(n&&!r)}return e.prototype.main=function(){for(var e=this.hasTouch?["touchstart"]:["mousedown"],t=this.hasTouch?["touchend","touchcancel"]:["mouseup","mouseleave"],n=this.hasTouch?["touchmove"]:["mousemove"],r=0,i=e;i.length>r;r++)ce(window,i[r],this.touchStartHandler.bind(this));for(var o=0,a=n;a.length>o;o++)ce(window,a[o],this.touchMoveHandler.bind(this));for(var s=0,u=t;u.length>s;s++)ce(window,u[s],this.touchStopHandler.bind(this))},e.prototype.touchStartHandler=function(e){if(1>=e.which){var t=+Date.now();this.safeguard!==t&&(this.touchTimeout&&clearTimeout(this.touchTimeout),this.safeguard=t,this.touchEvent={time:t,target:e.target,x:this._page("x",e),y:this._page("y",e),isTrusted:!0,type:"click"})}},e.prototype.touchMoveHandler=function(e){var t=Math.abs(this._page("x",e)-(this.touchEvent&&this.touchEvent.x)||0),n=Math.abs(this._page("y",e)-(this.touchEvent&&this.touchEvent.y)||0);(t>10||n>10)&&(this.touchEvent=null)},e.prototype.touchStopHandler=function(e){var t=this,n=+Date.now()-(this.touchEvent&&this.touchEvent.time)||0;this.touchEvent&&200>n?this.touchTimeout=setTimeout((function(){t.handler(t.touchEvent,"touch"),t.touchEvent=null}),200):this.touchEvent&&n>=200&&700>n&&(this.handler(this.touchEvent,"touch"),this.touchEvent=null)},e.prototype._page=function(e,t){return(this.hasTouch?t.touches[0]:t)["page".concat(e.toUpperCase())]},e}(),kn={click:"VIEW_CLICK",change:"VIEW_CHANGE"},Nn={name:"gioEventAutoTracking",method:function(e){var n,r=this;this.growingIO=e,this.main=function(){ce(document,"change",r._handleAction),r.growingIO.vdsConfig.touch?new _n(r._handleAction).main():ce(document,"click",r._handleAction)},this._handleAction=function(e,t){var n,i,o,a,s,u=r.growingIO,c=u.vdsConfig,d=u.emitter,g=e.target;if(!c.autotrack||!g)return!1;if(!(null==g?void 0:g.tagName)||"circle-shape"===(null===(n=null==g?void 0:g.tagName)||void 0===n?void 0:n.toLowerCase())||"circle-page"===(null===(i=null==g?void 0:g.tagName)||void 0===i?void 0:i.toLowerCase())||"heatmap-page"===(null===(o=null==g?void 0:g.tagName)||void 0===o?void 0:o.toLowerCase())||(null===(a=null==g?void 0:g.id)||void 0===a?void 0:a.indexOf("__vconsole"))>-1||(null===(s=null==g?void 0:g.id)||void 0===s?void 0:s.indexOf("__giokit"))>-1)return!1;var l=new bn(g,e.type).trackNodes();if(J(l))return!1;"click"!==e.type&&(l=[P(l)]),null==d||d.emit(We,{event:t,params:null!=e?e:{}}),l.forEach((function(t){var n=t.fullXpath;if(0>n.indexOf("#__giokit")&&0>n.indexOf("#__vconsole")&&(c.debug&&console.log("Action：",e.type,Date.now()),n)){var i=r.growingIO,o=i.trackingId,a=i.useEmbeddedInherit,s=i.useHybridInherit,u=i.dataStore;r.buildInteractiveEvent(o,e,t),a&&o!==a&&u.getTrackerVds(a).autotrack&&r.buildInteractiveEvent(a,e,t),s&&o!==s&&u.getTrackerVds(s).autotrack&&r.buildInteractiveEvent(s,e,t)}}))},this.buildInteractiveEvent=function(e,n,i){var o=r.growingIO.dataStore,a=o.eventContextBuilder,s=o.eventConverter,u=o.currentPage,c=i.skeleton,d=i.xcontent,g=i.index,l=i.content,f=i.hyperlink,v=t({eventType:kn[n.type],element:[{xpath:c,xcontent:d,textValue:l,index:g,hyperlink:f}]},a(e));v.attributes=u.eventSetPageProps(e,v),s(v)},this.pluginVersion="__PLUGIN_VERSION__",null===(n=this.growingIO.emitter)||void 0===n||n.on(Ze,(function(e){e.trackingId===r.growingIO.trackingId&&r.main()}))}},Tn=["VIEW_CLICK","VIEW_CHANGE","PAGE","CUSTOM","LOGIN_USER_ATTRIBUTES"],En=["LOGIN_USER_ATTRIBUTES"],Cn=["DOMContentLoaded","onreadystatechange"],Pn=["scroll","resize","load","beforeunload","popstate","hashchange","pagehide","unload"],xn=function(){function e(e){var n=this;this.growingIO=e,this.penetrateHybrid=!0,this.onOptionsInit=function(e,t){var r,i=n.growingIO,o=i.emitter,a=i.plugins;if(S(t.penetrateHybrid)&&(n.penetrateHybrid=t.penetrateHybrid),n._initHybridBridge()&&(n.onSendBefore=n.sendBeforeListener,!n.growingIO.useHybridInherit)){var s=null!==(r=n.hybridConfig.packageName)&&void 0!==r?r:n.hybridConfig.appPackage;a.gioMultipleInstances||t.packageName?n.hybridConfig.projectId===t.projectId&&s===t.packageName&&(n.growingIO.useHybridInherit=e,n.growingIO.dataStore.updateVdsConfig(e,{hybridLink:!0})):n.hybridConfig.projectId===t.projectId&&(n.growingIO.useHybridInherit=e,n.growingIO.dataStore.updateVdsConfig(e,{hybridLink:!0}))}n.growingIO.useHybridInherit&&(null==o||o.on(tt,(function(e){var t=e.newUserId,r=e.oldUserId,i=e.userKey;e.trackingId===n.growingIO.useHybridInherit&&n.penetrateHybrid&&(!t&&r?i?n._clearNativeUserIdAndUserKey():n._clearNativeUserId():i?n._setNativeUserIdAndUserKey(q(t),q(i)):n._setNativeUserId(q(t)))})),null==o||o.on(nt,(function(e){var t=e.newUserKey,r=e.oldUserKey,i=e.userId;e.trackingId===n.growingIO.useHybridInherit&&n.penetrateHybrid&&(!t&&r?n._clearNativeUserIdAndUserKey():n._setNativeUserIdAndUserKey(q(i),q(t)))})))},this._initHybridBridge=function(){var e,t,r;if(n.hasHybridBridge=!!window.GrowingWebViewJavascriptBridge,n.hasHybridBridge)try{(null===(e=null===window||void 0===window?void 0:window.GrowingWebViewJavascriptBridge)||void 0===e?void 0:e.configuration)||(window.GrowingWebViewJavascriptBridge.configuration=JSON.parse(window.GrowingWebViewJavascriptBridge.getConfiguration())),(null===(t=null===window||void 0===window?void 0:window.GrowingWebViewJavascriptBridge)||void 0===t?void 0:t.configuration)&&(n.hybridConfig=null===(r=null===window||void 0===window?void 0:window.GrowingWebViewJavascriptBridge)||void 0===r?void 0:r.configuration);var i=n;return window.GrowingWebViewJavascriptBridge.getDomTree=function(){for(var e=[],t=0;arguments.length>t;t++)e[t]=arguments[t];if(e.length>=4)return i._getDomTree.apply(this,e)},!0}catch(e){return $(e,"error"),!1}return!1},this.sendBeforeListener=function(e){var r=e.requestData,i=e.trackingId;if(n.hasHybridBridge){var o=function(){var e=n.processAttributes(t({},r));D(Tn,e.eventType)&&(D(En,e.eventType)?n.penetrateHybrid&&n._dispatchEvent(e):(n.penetrateHybrid||z(e,["userId","userKey","cs1"]),n._dispatchEvent(e)))};n.growingIO.useHybridInherit?i===n.growingIO.useHybridInherit&&o():i!==n.growingIO.trackingId||n.growingIO.plugins.gioMultipleInstances||o()}},this.processAttributes=function(e){return F(e,(function(t,n){_(t)||T(t)?F(e[n],(function(t,r){_(t)||T(t)?e[n][r]=JSON.stringify(t):e[n][r]=q(t)})):e[n]=q(t)})),e},this._setNativeUserId=function(e){ee((function(){return window.GrowingWebViewJavascriptBridge.setNativeUserId(e)}))},this._clearNativeUserId=function(){ee((function(){return window.GrowingWebViewJavascriptBridge.clearNativeUserId()}))},this._setNativeUserIdAndUserKey=function(e,t){ee((function(){return window.GrowingWebViewJavascriptBridge.setNativeUserIdAndUserKey(e,t)}))},this._clearNativeUserIdAndUserKey=function(){ee((function(){return window.GrowingWebViewJavascriptBridge.clearNativeUserIdAndUserKey()}))},this._dispatchEvent=function(e){ee((function(){var t;return null===(t=window.GrowingWebViewJavascriptBridge)||void 0===t?void 0:t.dispatchEvent(JSON.stringify(e))}))},this._getDomTree=function(e,t,r,i,o,a){var s=new Sn({webviewLeft:e,webviewTop:t,webviewWidth:r,webviewHeight:i,webviewZLevel:o}).trackNodes(null!=a?a:document.body,[],!1).map((function(e){return z(e,["originNode","peerNodes"]),e})),u=n.growingIO.dataStore.currentPage;return{page:{domain:u.domain,path:u.path,query:u.query,title:u.title},elements:s}},this.pluginVersion="__PLUGIN_VERSION__",this.growingIO.emitter.on(Ze,(function(e){var t=e.trackingId,r=e.vdsConfig;n.onOptionsInit(t,r),n.growingIO.useHybridInherit&&window.GrowingWebViewJavascriptBridge&&n._addDomChangeListener()}))}return e.prototype._addDomChangeListener=function(){var e,t=function(t){return void 0===t&&(t=""),function(){var n;"beforeunload"===t&&e&&e.disconnect(),null===(n=window.GrowingWebViewJavascriptBridge)||void 0===n||n.onDomChanged()}};(e=new MutationObserver(t("mutation"))).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),Cn.forEach((function(e){ce(document,e,t(e))})),Pn.forEach((function(e){ce(window,e,t(e))}))},e}(),Un={name:"gioHybridAdapter",method:xn},An={name:"gioImpressionTracking",method:function(e){var n,r=this;this.growingIO=e,this.documentReady=!1,this.main=function(e){D(["listener","manual"],e)?(r.documentReady=!0,r.growingIO.gioSDKInitialized&&(r.initIntersectionObserver(),r.initMutationObserver())):"emitter"===e&&r.documentReady&&(r.initIntersectionObserver(),r.initMutationObserver())},this.initIntersectionObserver=function(){var e,t=(null===(e=r.growingIO.vdsConfig)||void 0===e?void 0:e.impressionScale)||1e-13;r.intersectionObserver=new IntersectionObserver((function(e){J(e)||e.map((function(e){var n=e.target,i=n.dataset,o=n.id;if(e.intersectionRatio>=t){var a=r.getImpressionProperties(i);if(o){if("once"===i.gioImpType&&M(r.sentImps,o))return;r.sentImps[o]=a}if(a.eventName){var s=[];i.gioImpSendto&&(s=U(T(i.gioImpSendto)?i.gioImpSendto:ee((function(){return JSON.parse(i.gioImpSendto)}))||[]),J(s)&&ee((function(){return i.gioImpSendto.split(",").forEach((function(e){(e=y(e)&&e.trim().replace("[","").replace("]",""))&&s.push(e)}))}))),r.buildImpEvent(a,s)}}}))}),{threshold:[t]})},this.initMutationObserver=function(){var e;r.mutationObserver&&(null===(e=r.mutationObserver)||void 0===e||e.disconnect());var t=document.querySelectorAll("[data-gio-imp-track]");V(t).map((function(e){var t;null===(t=r.intersectionObserver)||void 0===t||t.observe(e)})),r.mutationObserver=new MutationObserver((function(e){e.map((function(e){var t,n;"attributes"===e.type&&(null===(t=e.target.dataset)||void 0===t?void 0:t.gioImpTrack)&&(null===(n=r.intersectionObserver)||void 0===n||n.observe(e.target)),"childList"===e.type&&e.addedNodes.forEach((function(e){var t,n;(null===(t=e.dataset)||void 0===t?void 0:t.gioImpTrack)&&(null===(n=r.intersectionObserver)||void 0===n||n.observe(e))}))}))})),r.mutationObserver.observe(document.body,{attributes:!0,childList:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["data-gio-imp-track","data-gio-imp-attrs",d,"data-gio-imp-sendto"]})},this.getImpressionProperties=function(e){var t={eventName:void 0,properties:{}};if(!(null==e?void 0:e.gioImpTrack))return t;if(t.eventName=e.gioImpTrack,M(e,"gioImpAttrs"))t.properties=ee((function(){return _(e.gioImpAttrs)?e.gioImpAttrs:JSON.parse(e.gioImpAttrs)}));else for(var n in e){var r=void 0,i=n.match(g);i&&"track"!==(r=H(i[1]))&&(t.properties[r]=e[n])}return t.properties=le(t.properties),l.test(t.eventName)&&!Number.isInteger(Number(C(t.eventName.split(""))))||(t.eventName=null,t={}),t},this.buildImpEvent=function(e,n){var i,o=e.eventName,a=e.properties,s=r.growingIO,u=s.trackingId,c=s.dataStore,d=c.eventContextBuilder,g=c.eventConverter,l=s.plugins,f=t({eventType:"CUSTOM",eventName:o},d(u));f.attributes=le(t(t({},null!==(i=f.attributes)&&void 0!==i?i:{}),_(a)&&!J(a)?a:{})),l.gioMultipleInstances&&!J(n)&&(f["&&sendTo"]=n),g(f)},this.pluginVersion="__PLUGIN_VERSION__",this.sentImps={},window.IntersectionObserver&&window.MutationObserver?("complete"===document.readyState?this.main("listener"):ce(document,"readystatechange",(function(){"complete"===document.readyState&&r.main("listener")}),{once:!0}),null===(n=this.growingIO.emitter)||void 0===n||n.on(Ze,(function(e){e.trackingId===r.growingIO.trackingId&&r.main("emitter")})),ce(window,"unload",(function(){var e,t;null===(e=r.intersectionObserver)||void 0===e||e.disconnect(),null===(t=r.mutationObserver)||void 0===t||t.disconnect()}))):$("当前浏览器不支持半自动埋点，gioImpressionTracking已自动关闭！","warn")}},Ln=["gioPerformance"],Dn=function(t){function n(e){var n=t.call(this,e)||this;return n.growingIO=e,n.growingIO.gioSDKFull=!0,n.pluginsContext={plugins:{gioCompress:lt,gioEmbeddedAdapter:wt,gioEventAutoTracking:Nn,gioHybridAdapter:Un,gioImpressionTracking:An}},n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+n+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}((function(e){var t,n,r,i,o,a,s=this;this.growingIO=e,this.innerPluginInit=function(){var e;Ln.forEach((function(e){var t;return z(null===(t=s.pluginsContext)||void 0===t?void 0:t.plugins,e)}));var t=j(null===(e=s.pluginsContext)||void 0===e?void 0:e.plugins).map((function(e){var t;return null===(t=s.pluginsContext)||void 0===t?void 0:t.plugins[e]}));J(t)||s.installAll(t,!0)},this.installAll=function(e,t){void 0===t&&(t=!1),(e||s.pluginItems).forEach((function(n){s.install(n.name,e?n:void 0,t)}))},this.install=function(e,t,n){var r,i;void 0===n&&(n=!1);var o=s.growingIO.emitter;try{t&&o.emit(Je,t);var a=L(s.pluginItems,(function(t){return t.name===e})),u={name:H(e),method:t.method||function(){},options:t.options||{}};return a>-1?(s.pluginItems[a]=u,n||$("重复加载插件 ".concat(e," 或插件重名，已跳过加载!"),"warn")):(s.pluginItems.push(u),n||$("加载插件 ".concat(e),"info"),(null===(r=s.growingIO)||void 0===r?void 0:r.plugins)[e]=new t.method(s.growingIO,t.options)),(null===(i=s.growingIO)||void 0===i?void 0:i.plugins)[e].options=t.options,!0}catch(r){return s.lifeError(t,r),n||$("插件【".concat(e,"】加载异常 ").concat(r),"error"),!1}},this.uninstall=function(e){var t;return z(s.pluginItems,e),z(null===(t=s.growingIO)||void 0===t?void 0:t.plugins,e),"gioEmbeddedAdapter"===e&&(s.growingIO.useEmbeddedInherit=""),"gioHybridAdapter"===e&&(s.growingIO.useHybridInherit=""),!0},this.uninstallAll=function(){s.growingIO.useEmbeddedInherit="",s.growingIO.useHybridInherit="",s.pluginItems.forEach((function(e){return s.uninstall(e.name)}))},this.lifeError=function(e,t){s.growingIO.emitter.emit(ze,{plugin:e,error:t}),$("插件执行错误 ".concat(e.name," ").concat(t),"error")},this.callLifeCycle=function(e,t){s.pluginItems.forEach((function(n){var r=s.growingIO.plugins[n.name]?s.growingIO.plugins[n.name][e]:void 0;if(r&&N(r))try{r(t)}catch(e){s.lifeError(n,e)}}))},this.pluginsContext={plugins:{}},this.pluginItems=[],null===(t=this.growingIO.emitter)||void 0===t||t.on(Je,(function(e){return s.callLifeCycle("onInstall",e)})),null===(n=this.growingIO.emitter)||void 0===n||n.on(ze,(function(e){return s.callLifeCycle("onError",e)})),null===(r=this.growingIO.emitter)||void 0===r||r.on(We,(function(e){return s.callLifeCycle("onComposeBefore",e)})),null===(i=this.growingIO.emitter)||void 0===i||i.on(Fe,(function(e){return s.callLifeCycle("onComposeAfter",e)})),null===(o=this.growingIO.emitter)||void 0===o||o.on(Xe,(function(e){return s.callLifeCycle("onSendBefore",e)})),null===(a=this.growingIO.emitter)||void 0===a||a.on(Qe,(function(e){return s.callLifeCycle("onSendAfter",e)}))})),Vn=function(e){var n=this;this.growingIO=e,this.generateURL=function(e){var t=n.growingIO.dataStore.getTrackerVds(e),r=t.serverUrl,i=t.projectId;return R(r,"http")?"".concat(r,"/v3/projects/").concat(i,"/collect"):"https://".concat(r,"/v3/projects/").concat(i,"/collect")},this.getSendType=function(e){var t=n.growingIO.dataStore.getTrackerVds(e).sendType;return"beacon"===t?re()?"beacon":"xhr":t},this.getHoardingQueue=function(e){var t;return null!==(t=n.hoardingQueue[e])&&void 0!==t?t:[]},this.commitRequest=function(e){var r,i=n.growingIO,o=i.vdsConfig;i.emitter.emit(je,{eventData:e,trackingId:e.trackingId});var a=t(t({},e),{requestType:n.getSendType(e.trackingId)});o.forceLogin?(n.hoardingQueue[e.trackingId]||(n.hoardingQueue[e.trackingId]=[]),null===(r=n.hoardingQueue[e.trackingId])||void 0===r||r.push(a)):(n.requestQueue.push(a),n.initiateRequest(e.trackingId))},this.initiateRequest=function(e){var r=n.getHoardingQueue(e);if(i(i([],r,!0),n.requestQueue,!0).length>0&&n.requestingNum<n.requestLimit){var o=n.growingIO.emitter;if(n.requestQueue=i(i([],r,!0),n.requestQueue,!0),n.hoardingQueue[e]=[],J(n.requestQueue))return;var a=n.requestQueue.shift();null==o||o.emit(Xe,{requestData:t({},a),trackingId:a.trackingId})}},this.sendEvent=function(e){var r,i,o=n.growingIO,a=o.vdsConfig,s=o.useHybridInherit,u=o.plugins,c=t({},e),d=n.generateURL(e.trackingId);if(z(c,["requestType","trackingId","requestId"]),a.debug&&console.log("[GrowingIO Debug]:",JSON.stringify(c,null,2).replace(/"/g,oe()?"":'"')),n.requestingNum+=1,s===e.trackingId)return n.requestSuccessFn(e),!1;var g,l=t({},c);a.compress&&(null==u?void 0:u.gioCompress)?"image"===e.requestType?(g="11",l=null===(r=null==u?void 0:u.gioCompress)||void 0===r?void 0:r.compressToEncodedURIComponent(JSON.stringify([l]))):(g="1",l=null===(i=null==u?void 0:u.gioCompress)||void 0===i?void 0:i.compressToUint8Array(JSON.stringify([l]))):(g="0",l=JSON.stringify([l]));var f="".concat(d,"?stm=").concat(+Date.now(),"&compress=").concat(g);switch(e.requestType){case"beacon":default:n.sendByBeacon(e,l,f);break;case"xhr":n.sendByXHR(e,l,f);break;case"image":n.sendByImage(e,l,f)}},this.sendByBeacon=function(e,t,r){navigator.sendBeacon(r,t)?n.requestSuccessFn(e):n.requestFailFn(e,"xhr")},this.sendByXHR=function(e,t,r){var i=n.growingIO.dataStore.getTrackerVds(e.trackingId).requestTimeout,o=new XMLHttpRequest;if(o)return o.open("POST",r,!0),o.onload=function(){204===o.status?n.requestSuccessFn(e):n.requestFailFn(e,"image")},o.ontimeout=o.onerror=o.onabort=function(){n.requestFailFn(e,"image")},o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.timeout=i,void o.send(t);if(null===window||void 0===window?void 0:window.XDomainRequest){var a=new window.XDomainRequest;a.open("POST",r.replace("https://","http://"),!0),a.onload=function(){204===a.status?n.requestSuccessFn(e):n.requestFailFn(e,"image")},a.onerror=a.ontimeout=function(){n.requestFailFn(e,"image")},a.send(t)}},this.sendByImage=function(e,t,r){var i=n.growingIO.dataStore.getTrackerVds(e.trackingId).requestTimeout,o="".concat(r,"&data=").concat(t),a=document.createElement("img");a.width=1,a.height=1;var s=window.setTimeout((function(){n.requestingNum-=1,n.clearImage(a),window.clearTimeout(s),s=null,n.initiateRequest(e.trackingId)}),i);a.onload=function(){n.requestSuccessFn(e),n.clearImage(a),window.clearTimeout(s),s=null},a.onerror=a.onabort=function(){n.requestSuccessFn(e),n.clearImage(a),window.clearTimeout(s),s=null},a.src=o},this.clearImage=function(e){e.src="",e.onload=function(){},e.onerror=e.onerabort=function(){},e=null},this.requestSuccessFn=function(e){var r;n.requestingNum-=1;var i=n.growingIO.userStore.getSessionId(e.trackingId);i===e.sessionId&&n.growingIO.userStore.setSessionId(e.trackingId,i),null===(r=n.growingIO.emitter)||void 0===r||r.emit(Qe,{requestData:t({},e),trackingId:e.trackingId}),n.initiateRequest(e.trackingId)},this.requestFailFn=function(e,r){n.requestingNum-=1;var i=n.requestQueue.some((function(t){return t.requestId===e.requestId}));if(!i&&r)var o=window.setTimeout((function(){n.requestQueue.push(t(t({},e),{requestType:r})),n.initiateRequest(e.trackingId),window.clearTimeout(o),o=null}),800)},this.hoardingQueue={},this.requestQueue=[],this.requestLimit=10,this.requestingNum=0,this.growingIO.emitter.on(Ze,(function(e){var t=e.trackingId;n.hoardingQueue[t]=[]})),this.growingIO.emitter.on(Xe,(function(e){var t=e.requestData;e.trackingId===n.growingIO.trackingId&&n.sendEvent(t)}))},qn="gdp_user_id_gioenc",Kn=function(e){var t=this;this.growingIO=e,this.getUid=function(){var e=t.growingIO.storage.getItem(qn);if(e)return e;var n=Z();return t.setUid(n),n},this.setUid=function(e){var n,r=t.growingIO.storage,i=r.getItem(qn)||t.prevUId;r.setItem(qn,e),i!==e&&(null===(n=t.growingIO.emitter)||void 0===n||n.emit("UID_UPDATE",{newUId:e,oldUId:i})),t.prevUId=e},this._getSidKey=function(e){return t.growingIO.dataStore.getStorageKey(e,"sessionId")},this.getPrevSessionId=function(e){var n;return null===(n=t.prevIds[e])||void 0===n?void 0:n.sessionId},this.getSessionId=function(e){var n=t.growingIO.storage.getItem(t._getSidKey(e));if(n)return n;var r=Z();return t.setSessionId(e,r),r},this.setSessionId=function(e,n){var r;n||(n=Z());var i=t.growingIO,o=i.storage,a=i.dataStore,s=i.emitter,u=o.getItem(t._getSidKey(e))||t.getPrevSessionId(e),c=(null!==(r=a.getTrackerVds(e))&&void 0!==r?r:{}).sessionExpires,d=void 0===c?30:c;if(o.setItem(t._getSidKey(e),n,+Date.now()+60*d*1e3),u!==n){var g=o.getKeys().filter((function(e){return f.test(e)}));g.forEach((function(e){o.removeItem(e)})),o.setItem(a.getStorageKey(e,"sentSign"),""),null==s||s.emit(et,{newSessionId:n,oldSessionId:u,trackingId:e})}t.prevIds[e]||(t.prevIds[e]={}),t.prevIds[e].sessionId=n},this._getUserIdKey=function(e){return t.growingIO.dataStore.getStorageKey(e,"userId")},this.getPrevUserId=function(e){var n;return null===(n=t.prevIds[e])||void 0===n?void 0:n.userId},this.getUserId=function(e){return t.growingIO.storage.getItem(t._getUserIdKey(e))||""},this.setUserId=function(e,n){var r,i,o=t.growingIO.storage,a=o.getItem(t._getUserIdKey(e))||t.getPrevUserId(e);o.setItem(t._getUserIdKey(e),n),null===(r=t.growingIO.emitter)||void 0===r||r.emit(tt,{newUserId:n,oldUserId:a,userKey:t.getUserKey(e),trackingId:e}),a!==n&&(null===(i=t.growingIO.emitter)||void 0===i||i.emit("USERID_UPDATE",{newUserId:n,oldUserId:a,userKey:t.getUserKey(e),trackingId:e})),n&&t.setGioId(e,n),t.prevIds[e]||(t.prevIds[e]={}),t.prevIds[e].userId=n},this._getUserKeyKey=function(e){return t.growingIO.dataStore.getStorageKey(e,"userKey")},this.getPrevUserKey=function(e){var n;return null===(n=t.prevIds[e])||void 0===n?void 0:n.userKey},this.getUserKey=function(e){return t.growingIO.storage.getItem(t._getUserKeyKey(e))||""},this.setUserKey=function(e,n){var r,i,o=t.growingIO.storage,a=o.getItem(t._getUserKeyKey(e))||t.getPrevUserKey(e);o.setItem(t._getUserKeyKey(e),n),null===(r=t.growingIO.emitter)||void 0===r||r.emit(nt,{newUserKey:n,oldUserKey:a,userId:t.getUserId(e),trackingId:e}),a!==n&&(null===(i=t.growingIO.emitter)||void 0===i||i.emit("USERKEY_UPDATE",{newUserKey:n,oldUserKey:a,userId:t.getUserId(e),trackingId:e})),t.prevIds[e]||(t.prevIds[e]={}),t.prevIds[e].userKey=n},this._getGioIdKey=function(e){return t.growingIO.dataStore.getStorageKey(e,"gioId")},this.getPrevGioId=function(e){var n;return null===(n=t.prevIds[e])||void 0===n?void 0:n.gioId},this.getGioId=function(e){return t.growingIO.storage.getItem(t._getGioIdKey(e))||""},this.setGioId=function(e,n){var r,i=t.growingIO.storage,o=i.getItem(t._getGioIdKey(e))||t.getPrevGioId(e);i.setItem(t._getGioIdKey(e),n),o!==n&&(null===(r=t.growingIO.emitter)||void 0===r||r.emit("GIOID_UPDATE",{newGioId:n,oldGioId:o,trackingId:e})),t.prevIds[e]||(t.prevIds[e]={}),t.prevIds[e].gioId=n},this.transferStorage=function(e,n){if(!n.storage.getItem(qn)&&e===n.trackingId&&t.growingIO.storage.getItem("gr_user_id")){var r=n.vdsConfig.projectId,i=n.storage,o=i.getItem("gr_user_id");o&&t.setUid(o);var a=i.getItem("".concat(r,"_gr_cs1"))||t.getUserId(e);a&&t.setUserId(e,a),i.removeItem("gr_user_id"),i.removeItem("".concat(r,"_gr_cs1")),i.removeItem("".concat(r,"_gr_last_sent_cs1")),i.removeItem("".concat(r,"_gr_last_sent_sid_with_cs1")),i.removeItem("".concat(r,"_gr_session_id")),i.removeItem("".concat(r,"_gr_session_id_sent_vst"));var s=A(i.getKeys(),(function(e){return e.indexOf("gr_imp_")>-1}));s&&i.removeItem(s)}},this.prevIds={},this.growingIO.emitter.on(Ze,(function(e){var n=e.trackingId,r=e.growingIO;t.transferStorage(n,r)}))},Hn=function(){function e(){var e,n=this;this.init=function(e){var t;n.emitter.emit("ON_SDK_INITIALIZE_BEFORE");try{if($("Gio Web SDK 初始化中...","info"),e.trackingId&&D(n.dataStore.initializedTrackingIds,e.trackingId))throw Error("已存在实例 ".concat(e.trackingId,"，请勿重复初始化!"));if(n.trackingId&&!n.plugins.gioMultipleInstances)throw Error("您正在尝试初始化另一个实例，请集成多实例插件后重试!");var r=n.dataStore.currentPage,i=n.dataStore.initTrackerOptions(e);return(!n.trackingId||i.trackingId===n.trackingId)&&(n.storage=Me(n.vdsConfig),r.hookHistory(),!1!==i.extraUA&&ut.isCompatible()&&ut.initialize(),n.gioSDKInitialized=!0,n.vdsConfig.gioSDKInitialized=!0),null===(t=n.emitter)||void 0===t||t.emit(Ze,{growingIO:n,trackingId:i.trackingId,vdsConfig:i}),r.parsePage(),n.vdsConfig.originalSource&&n.dataStore.setOriginalSource(i.trackingId),$("Gio Web SDK 初始化完成！".concat(n.useEmbeddedInherit===i.trackingId?"小程序模式":n.useHybridInherit===i.trackingId?"Hybrid模式":"Web模式"),"success"),n.vdsConfig.forceLogin&&$("forceLogin已开启，请调用 identify 方法设置 openId 以继续上报!","info"),n._waitForUserAgentAndSendEvents(i.trackingId),!0}catch(e){return $(e,"error"),!1}},this.handlerDistribute=function(e,t,r){n.dataStore.getTrackerVds(e)?ut.isInitializing()?ut.initialize().finally((function(){n[t].apply(n,i([e],r,!1))})):n[t].apply(n,i([e],r,!1)):(N(P(r))&&te(P(r),!1),$("不存在实例：".concat(e,"，请检查!"),"warn"))},this.registerPlugins=function(e,t){if(T(e)){var r=[];e.forEach((function(e,t){ne(e,t)&&r.push(e)})),n.plugins.installAll(r)}else $("插件注册失败，参数不合法，请检查!","error");te(t,n.plugins.pluginItems)},this.getPlugins=function(e){te(e,n.plugins.pluginItems)},this.getDeviceId=function(e){te(e,n.userStore.getUid())},this.setOption=function(e,t,r,i){var o,a;D(j(ke),t)?typeof r===(null===(o=Oe[t])||void 0===o?void 0:o.type)?(n.dataStore.setOption(e,t,r),$("已修改".concat(ke[t],": ").concat(r),"info"),a=!0):($("参数格式不正确：".concat(r,"，请检查后重试!"),"error"),a=!1):($("不存在可修改的配置项：".concat(t,"，请检查后重试!"),"error"),a=!1),te(i,a)},this.getOption=function(e,t,r){N(t)&&w(r)&&(r=t,t=void 0),te(r,n.dataStore.getOption(e,t))},this.sendVisit=function(e,r,i){n.dataStore.buildVisitEvent(t(t({},r),{trackingId:e})),te(i)},this.setPageListener=function(e,t){var r=n.dataStore.currentPage;if(N(t)){r.pageListeners[e]=t;var i=n.dataStore.currentPage,o=i.path,a=i.query,s=i.title;te(t,{path:o,query:a,title:s})}},this.setPageAttributes=function(e,t,r){var i;if(_(t)&&!J(t))if(n.dataStore.getTrackerVds(e).trackPage)i=!1,$("仅在关闭trackPage时允许调用setPageAttributes，请确认后修改初始化配置项!","error");else{var o=n.dataStore.currentPage;J(o.pageProps[e])&&(o.pageProps[e]={}),J(o.pageProps[e][o.path])&&(o.pageProps[e][o.path]={}),J(t)||F(t,(function(t,n){N(o.pageProps[e][o.path][n])&&!N(t)||(o.pageProps[e][o.path][n]=t)})),i=!0}else i=!1,ue("setPageAttributes");te(r,i)},this.clearPageAttributes=function(e,t,r){var i=!0;try{if(!J(n.dataStore.currentPage.pageProps[e])){var o=n.dataStore.currentPage;T(t)&&!J(t)?t.forEach((function(t){z(o.pageProps[e][o.path],t)})):o.pageProps[e][o.path]={}}}catch(e){ue("clearPageAttributes"),i=!1}te(r,i)},this.sendPage=function(e,t,r){n.dataStore.getTrackerVds(e).trackPage?$("仅在关闭trackPage时允许调用sendPage，请确认后修改初始化配置项!","error"):(n.dataStore.currentPage.buildPageEvent(e,t),te(r))},this.identify=function(e,t,r){if(e===n.trackingId){if(n.vdsConfig.forceLogin){if(!Ie(t))return void ue("identify");var i=q(t).slice(0,1e3);n.userStore.setUid(i),n.dataStore.initializedTrackingIds.forEach((function(e){var t=n.uploader.getHoardingQueue(e);t.forEach((function(e,n){return t[n].deviceId=i})),e===n.trackingId&&n.vdsConfig.forceLogin&&n.dataStore.setOption(e,"forceLogin",!1),n.uploader.initiateRequest(e)}))}else ue("identify",!1,"forceLogin未开启");te(r)}else ue("identify",!1,"子实例不允许调用identify")},this.setUserAttributes=function(e,r,i){var o,a;if(_(r)&&!J(r)){var s=n.dataStore,u=s.eventContextBuilder,c=s.eventConverter,d=t({eventType:"LOGIN_USER_ATTRIBUTES"},u(e));d.attributes=le(t(t({},null!==(o=d.attributes)&&void 0!==o?o:{}),fe(r))),c(d),a=!0}else ue("setUserAttributes"),a=!1;te(i,a)},this.setUserId=function(e,t,r,i){var o;if(Ie(q(t).trim())){var a=n.userStore.getGioId(e),s=!w(r)&&q(r).length>0?q(r).slice(0,1e3):"";n.userStore.setUserKey(e,s),!n.dataStore.getTrackerVds(e).idMapping&&s&&$("您设置了 userKey ，请初始化开启 idMapping!","warn"),n.userStore.setUserId(e,q(t).slice(0,1e3)),a&&a!==n.userStore.getUserId(e)&&n.userStore.setSessionId(e,""),o=!0}else n.clearUserId(e),ue("setUserId"),o=!1;te(i,o)},this.clearUserId=function(e,t){n.userStore.setUserId(e,""),n.userStore.setUserKey(e,""),te(t)},this.setGeneralProps=function(e,t,r){var i;_(t)&&!J(t)?(J(n.dataStore.generalProps[e])&&(n.dataStore.generalProps[e]={}),F(t,(function(t,r){N(n.dataStore.generalProps[e][r])&&!N(t)||(n.dataStore.generalProps[e][r]=t)})),i=!0):(ue("setGeneralProps"),i=!1),te(r,i)},this.clearGeneralProps=function(e,t,r){J(n.dataStore.generalProps[e])||(T(t)&&!J(t)?t.forEach((function(t){z(n.dataStore.generalProps[e],t)})):n.dataStore.generalProps[e]={}),te(r)},this.track=function(e,r,i,o){we(r,(function(){var o,a=n.dataStore,s=a.eventContextBuilder,u=a.eventConverter,c=t({eventType:"CUSTOM",eventName:r},s(e));c.attributes=le(t(t({},null!==(o=c.attributes)&&void 0!==o?o:{}),fe(t({},_(i)&&!J(i)?i:{})))),n.plugins.gioMultipleInstances&&i&&i["&&sendTo"]&&(c["&&sendTo"]=i["&&sendTo"]),u(c)})),te(o)},this.trackTimerStart=function(e,t,r){var i;n.dataStore.getTrackerVds(e).dataCollect?we(t,(function(){i=Z(),n.dataStore.trackTimers[e]||(n.dataStore.trackTimers[e]={}),n.dataStore.trackTimers[e][i]={eventName:t,leng:0,start:+Date.now()}})):$("指定实例未开启数据采集，请检查!","error"),te(r,i)},this.trackTimerPause=function(e,t,r){var i=n.dataStore.trackTimers[e];if(t&&i&&i[t]){var o=i[t];o.start&&(o.leng=o.leng+(+Date.now()-o.start)),o.start=0}else $("未查询到指定计时器，请检查!","error");te(r)},this.trackTimerResume=function(e,t,r){var i=n.dataStore.trackTimers[e];if(t&&i&&i[t]){var o=i[t];0===o.start&&(o.start=+Date.now())}else $("未查询到指定计时器，请检查!","error");te(r)},this.trackTimerEnd=function(e,r,i,o){var a,s,u=n.dataStore.getTrackerVds(e).dataCollect,c=n.dataStore.trackTimers[e];if(r&&c&&c[r]){if(u){var d=c[r];if(0!==d.start){var g=+Date.now()-d.start;d.leng=g>0?d.leng+g:0}var l=n.dataStore,f=l.eventContextBuilder,v=l.eventConverter,h=t({eventType:"CUSTOM",eventName:d.eventName},f(e));h.attributes=le(t(t(t({},null!==(a=h.attributes)&&void 0!==a?a:{}),fe(t({},_(i)&&!J(i)?i:{}))),{event_duration:d.leng>864e5?0:d.leng/1e3})),n.plugins.gioMultipleInstances&&i&&i["&&sendTo"]&&(h["&&sendTo"]=i["&&sendTo"]),v(h),s=!0}else $("指定实例未开启数据采集，计时器已移除，请检查!","error"),s=!1;n.removeTimer(e,r)}else $("未查询到指定计时器，请检查!","error"),s=!1;te(o,s)},this.removeTimer=function(e,t,r){var i=n.dataStore.trackTimers[e];t&&i&&i[t]?delete i[t]:$("未查询到指定计时器，请检查!","error"),te(r)},this.clearTrackTimer=function(e,t){n.dataStore.trackTimers[e]={},te(t)},this.updateImpression=function(e){var t,r,i=null===(r=null===(t=n.plugins)||void 0===t?void 0:t.gioImpressionTracking)||void 0===r?void 0:r.main;i?i("manual"):$("updateImpression 错误! 请集成半自动埋点浏览插件后重试!","error"),te(e)},this.getABTest=function(e,t,n){$("获取ABTest数据错误! 请集成ABTest插件后重试!","error"),te(n,{})},this.setBeforeSendListener=function(e,t,r){q(t).indexOf("sendPage")>-1?$("拦截回调中不能调用sendPage方法，请检查!","error"):N(t)?(n.dataStore.beforeSendListener[e]=t,te(r)):te(r,!1)},this.getUserAgent=function(e){var t="Unknown";try{t=!1!==n.vdsConfig.extraUA?ut.getUserAgent():"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"Unknown"}catch(e){t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"Unknown"}return te(e,t),t},this.sdkVersion="4.3.1",this.vdsName=window._gio_local_vds||"vds",this.utils=t(t({},Y),me),this.emitter=(e=e||Object.create(null),{on:function(t,n){(e[t]||(e[t]=[])).push(n)},off:function(t,n){e[t]&&e[t].splice(e[t].indexOf(n)>>>0,1)},emit:function(t,n){(e[t]||[]).slice().map((function(e){e(n)})),(e["*"]||[]).slice().map((function(e){e(t,n)}))}}),this.useEmbeddedInherit="",this.useHybridInherit="",this.gioSDKInitialized=!1,this.plugins=new Dn(this),this.plugins.innerPluginInit(),this.dataStore=new gt(this),this.userStore=new Kn(this),this.uploader=new Vn(this)}return e.prototype._waitForUserAgentAndSendEvents=function(e){var t=this;ut.isInitializing()?ut.initialize().finally((function(){t._sendEventsAfterUserAgent(e)})):this._sendEventsAfterUserAgent(e)},e.prototype._sendEventsAfterUserAgent=function(e){var t;this.useEmbeddedInherit!==e&&this.dataStore.sendVerifiedVisit(e),this.dataStore.sendVerifiedPage(e),null===(t=this.emitter)||void 0===t||t.emit($e,{growingIO:this,trackingId:e})},e}(),Rn=window._gio_local_vds||"vds",Gn=null!==(St=null===(Ot=window[Rn])||void 0===Ot?void 0:Ot.namespace)&&void 0!==St?St:"gdp";!function(){var e,n,r,o,a;if(null===(e=window[Rn])||void 0===e?void 0:e.gioSDKInstalled)return _t=window[Gn],void $("SDK重复加载，请检查是否重复加载SDK或接入其他平台SDK导致冲突!","warn");window[Rn]=t(t({},null!==(n=window[Rn])&&void 0!==n?n:{}),{gioSDKInstalled:!0});var s=new Hn,u=function(e){return D(_e,e)&&!!s[e]};_t=function(){for(var e,n,r=[],o=0;arguments.length>o;o++)r[o]=arguments[o];var a=r[0],c="g0",d=a;if(a.indexOf(".")>-1&&(c=null!==(e=a.split(".")[0])&&void 0!==e?e:"g0",d=a.split(".")[1]),y(d)&&D(_e,d)&&s[d]){var g=x(V(r));if("init"===d){var l=function(e,t){if(D(["","localhost","127.0.0.1"],location.hostname)&&!window._gr_ignore_local_rule)return $("当前SDK不允许在本地环境初始化!","error"),!1;var n=q(t[0]),r=q(t[1]),i=(4===t.length?t[3]:t[2])||{};return n&&r?e.dataStore.initializedTrackingIds.some((function(t,i){var o=0===i?e.vdsConfig:e.subInstance[t];return o.projectId===n&&o.dataSourceId===r}))?($("SDK初始化失败，重复初始化，请检查初始化参数!","error"),!1):{projectId:n,dataSourceId:r,appId:i.appId||q(4===t.length?t[2]:""),userOptions:i}:($('SDK初始化失败，请使用 gdp("init", "您的GrowingIO项目 accountId", "您项目的 dataSourceId", options: { host: "您的数据上报地址host" }); 进行初始化!',"error"),!1)}(s,g);if(l){var f=l.projectId,v=l.dataSourceId,h=l.appId,p=l.userOptions;return s.init(t(t({},p),{projectId:f,dataSourceId:v,appId:h||p.appId,trackingId:c}))}return!1}"registerPlugins"===d?s.registerPlugins.apply(s,g):D(["setGeneralProps","clearGeneralProps"],d)?s[d].apply(s,i([c],g,!1)):s.gioSDKInitialized&&s.vdsConfig?D(Se,d)?ee((function(){return s.handlerDistribute(c,d,g)})):ee((function(){return s[d].apply(s,g)})):(s.emitter.emit("UN_EXECUTE_CALL",r),$("SDK未初始化!","error"))}else if(D(Ne,d))$("方法 ".concat(q(d)," 已被弃用，请移除!"),"warn");else{if("canIUse"===d)return u(r[1]);$("不存在名为 ".concat(q(d)," 的方法调用!"),"error")}window[Rn]=t(t({},window[Rn]),{_gr_ignore_local_rule:null!==(n=window._gr_ignore_local_rule)&&void 0!==n&&n,gioSDKVersion:s.sdkVersion,gioSDKFull:s.gioSDKFull,canIUse:u})};var c=null===(r=window[Gn])||void 0===r?void 0:r.q,d=null===(o=window[Gn])||void 0===o?void 0:o.e,g=null===(a=window[Gn])||void 0===a?void 0:a.ef;if(window[Gn]=_t,window[Gn].e=d,window[Gn].ef=g,window.gdp=_t,window.gdp.e=d,window.gdp.ef=g,T(c)&&!J(c))for(var l=c.length,f=0;l>f;f+=1)_t.apply(null,c.shift())}();var Bn=_t;export{Bn as default};
