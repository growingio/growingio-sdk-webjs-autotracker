function e(e,o,i){if(i||2===arguments.length)for(var n,r=0,t=o.length;t>r;r++)!n&&r in o||(n||(n=[].slice.call(o,0,r)),n[r]=o[r]);return e.concat(n||[].slice.call(o))}var o,i=function(e){return null==e||void 0===e},n={}.hasOwnProperty,r=function(e,o){return!i(e)&&n.call(e,o)},t=function(e){return"object"==typeof e?Object.keys(e):[]},g={},a={}.hasOwnProperty;function s(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function c(e){try{return encodeURIComponent(e)}catch(e){return null}}g.stringify=function(e,o){o=o||"";var i,n,r=[];for(n in"string"!=typeof o&&(o="?"),e)if(a.call(e,n)){if((i=e[n])||null!=i&&!isNaN(i)||(i=""),n=c(n),i=c(i),null===n||null===i)continue;r.push(n+"="+i)}return r.length?o+r.join("&"):""},g.parse=function(e){for(var o,i=/([^=?#&]+)=?([^&]*)/g,n={};o=i.exec(e);){var r=s(o[1]),t=s(o[2]);null===r||null===t||r in n||(n[r]=t)}return n};var d=e(["gioappid","giocs1","giodatacollect","gioprojectid","gios","giou"],["gioappchannel","giodevicebrand","giodevicemodel","giodevicetype","giolanguage","gionetworkstate","giooperatingsystem","gioplatform","gioplatformversion","gioscreenheight","gioscreenwidth"],!0),l=e(["giodatasourceid","gioid"],["giouserkey"],!0),u={gioappchannel:"appChannel",giodevicebrand:"deviceBrand",giodevicemodel:"deviceModel",giodevicetype:"deviceType",giolanguage:"language",gionetworkstate:"networkState",giooperatingsystem:"operatingSystem",gioplatform:"platform",gioplatformversion:"platformVersion",gioscreenheight:"screenHeight",gioscreenwidth:"screenWidth"},f="gio_search_cookie_gioenc",p=function(n){var a=this;this.growingIO=n,this.main=function(e){var n,s=e.projectId,c=e.appId,d=a.getGQS(),l=!1;return"none"!==a.qsFrom&&d.gioprojectid===s&&d.gioappid===c&&((function(e){return Array.isArray(e)&&"[object Array]"==={}.toString.call(e)}(n=d)?0!==n.length:function(e){return"[object Object]"==={}.toString.call(e)&&!i(e)}(n)?0!==t(n).length:n)?a.growingIO.storage.setItem(f,g.stringify(d)):a.growingIO.storage.removeItem(f),a.growingIO.setUserId=function(){},a.growingIO.clearUserId=function(){},"cdp"===o&&(a.growingIO.vdsConfig.dataSourceId=d.giodatasourceid,a.growingIO.vdsConfig.ignoreFields=a.growingIO.vdsConfig.ignoreFields.filter((function(e){return r(d,e)})),r(d,"giodatacollect")&&(a.growingIO.vdsConfig.dataCollect=["true",!0].includes(d.giodatacollect),a.growingIO.setDataCollect=function(){},a.growingIO.setOption=function(){})),a.growingIO.emitter.on("SDK_INITIALIZED",(function(){a.growingIO.userStore.sessionId=d.gios,a.growingIO.userStore.uid=d.giou,d.gioid&&(a.growingIO.userStore.gioId=d.gioid),d.giocs1&&(a.growingIO.userStore.userId=d.giocs1),"cdp"===o&&r(d,"giouserkey")&&(a.growingIO.userStore.userKey=d.giouserkey),window.setInterval((function(){a.growingIO.userStore.sessionId=d.gios}),.8*a.growingIO.vdsConfig.sessionExpires*60*1e3)})),t(u).forEach((function(e){r(d,e)&&(a.growingIO.dataStore.eventContextBuilderInst.minpExtraParams[u[e]]=d[e])})),l=!0),a.gioURLRewrite(),l},this.getGQS=function(){var i=a.growingIO.vdsConfig.hashtag,n=a.growingIO.storage.getItem(f),s=window.location.search,c=window.location.hash,u=i?c.substring(c.indexOf("?")+1):"",p=g.parse(s),h=g.parse(u),w=g.parse((n||"").replace("gioenc-","")),I="";if(r(p,"gioprojectid"))I=p,a.qsFrom="search";else if(r(h,"gioprojectid"))I=h,a.qsFrom="hash";else{if(!r(w,"gioprojectid"))return a.qsFrom="none",{};I=w,a.qsFrom="cookie"}var m={},v={},O="cdp"===o?e(e([],d,!0),l,!0):d;return t(I).forEach((function(e){var o=e.toLowerCase();O.includes(o)?["","undefined","null",void 0,null].includes(I[e])||(m[o]=I[e],"true"===I[e]&&(m[o]=!0),"false"===I[e]&&(m[o]=!1)):v[e]=I[e]})),a.gqs=m,a.ngqs=v,m},this.gioURLRewrite=function(){var e=a.growingIO.vdsConfig.hashtag,o=window.location.search,i=window.location.hash,n=!1;if("search"===a.qsFrom&&(o=g.stringify(a.ngqs,!0),n=!0),e&&"hash"===a.qsFrom&&(i="".concat(i.split("?")[0]).concat(g.stringify(a.ngqs,!0)),n=!0),n){var r="".concat(window.location.pathname).concat(o||"").concat(i||"");window.history.replaceState(null,document.title,r)}},o=this.growingIO.gioEnvironment,this.gqs={},this.ngqs={},this.qsFrom="search"};window.gioEmbeddedAdapter={name:"gioEmbeddedAdapter",method:p};var h={name:"gioEmbeddedAdapter",method:p};export{h as default};
