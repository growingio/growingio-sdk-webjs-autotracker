!function(){"use strict";var t=function(){return t=Object.assign||function(t){for(var e,n=1,r=arguments.length;r>n;n++)for(var i in e=arguments[n])({}).hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},t.apply(this,arguments)},e=function(t){return null==t||void 0===t},n=function(t,i){if(!function(t){return"[object Object]"==={}.toString.call(t)&&!e(t)}(t))return!1;try{if("string"===r(i))return delete t[i];if("array"===r(i))return i.map((function(e){return delete t[e]}));"object"===r(i)&&i.constructor===RegExp&&function(t){return"object"===r(t)?Object.keys(t):[]}(t).forEach((function(e){i.test(e)&&n(t,e)}))}catch(t){return!1}},r=function(t){var e=typeof t;return"object"===e?null===t?"null":function(t){return Array.isArray(t)&&"[object Array]"==={}.toString.call(t)}(t)?"array":e:e},i=function(e,n,r,i){void 0===i&&(i={}),document.addEventListener?e.addEventListener(n,r,t(t({},{capture:!0}),i)):e.attachEvent?e.attachEvent("on"+n,r):e["on"+n]=r},o=["TR","LI","DL"],a=function(t,e){for(var n=0,r=e.length,i=t.length;r>n;n++,i++)t[i]=e[n];return t}(["A","BUTTON"],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(o)),u=["button","submit","reset"],s=["radio","checkbox","search"],c=["I","EM","svg","IMG"],f=["TEXTAREA","HTML","BODY"],l=["I","SPAN","EM","B","STRONG"],d=["tspan","text","g","rect","path","defs","clippath","desc","title","math","use"],h=/(^| |[^ ]+\-)(clear|clearfix|active|hover|enabled|current|selected|unselected|hidden|display|focus|disabled|undisabled|open|checked|unchecked|undefined|null|ng-|growing-)[^\. ]*/g,p=/^[a-zA-Z-\_][a-zA-Z\-\_0-9]+$/,g=/^([a-zA-Z\-\_0-9]+)$/,v="data-growing-ignore",y=function(t,e){if(void 0===e&&(e=!0),t&&(null==(t=t.replace(/[\n \t]+/g," ").trim())?void 0:t.length))return t.slice(0,e?50:void 0)},m=function(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;r>n;n++)if(t[n]!==e[n])return!1;return!0},b=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},N=function(t,e){for(var n=0,r=e.length,i=t.length;r>n;n++,i++)t[i]=e[n];return t},w=function(t,e){return t instanceof Element&&t.hasAttribute(e)&&"false"!==t.getAttribute(e)},x=function(t){return!t||-1!==["BODY","HTML","#document"].indexOf(t.nodeName)},E=function(t,e){for(var n=t.parentNode;n&&!x(n);){if(e(n))return n;n=n.parentNode}},O=function(t){return Array.from((null==t?void 0:t.childNodes)||[]).reduce((function(t,e){return e instanceof Element?N(N(N([],b(t)),[e]),b(O(e))):t}),[])},T=function(t){return Array.from((null==t?void 0:t.childNodes)||[]).filter((function(t){return t instanceof Element}))},I=function(t){return!t.hasChildNodes()||"svg"===t.nodeName||0===T(t).length},L=function(t){return!(!t.hasChildNodes()||"svg"===t.nodeName)&&0===Array.from(t.childNodes).filter((function(t){return!I(t)})).length},C=function(t){return w(t,"data-growing-container")||-1!==a.indexOf(t.nodeName)},A=function(t){var e=t.nodeName;return-1!==c.indexOf(e)},D=function(t){var e,n;if(t.textContent)return!1;var r=T(t);if(0===r.length)return!1;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!A(a)&&"SPAN"!==a.nodeName)return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!0},P=function(t){return t instanceof HTMLInputElement&&"INPUT"===t.tagName&&-1!==u.indexOf(t.type)},_=function(t){return t instanceof HTMLInputElement&&"INPUT"===t.tagName&&-1!==s.indexOf(t.type)},S=function(t,e,n){if(void 0===e&&(e=4),void 0===n&&(n=1),n>e)return!1;for(var r="svg"===t.tagName?[]:T(t),i=0;i<r.length;i++){var o=r[i];if(!S(o,e,n+1))return!1}return e>=n},R=function(t){if(!(t instanceof Element)||w(t,v))return!0;for(var e=t.parentNode;e&&!x(e);){if(w(e,v))return!0;e=e.parentNode}return!1};function j(t){var e;if(t instanceof Element){var n=t.getAttribute("name");if(n)return[n];if(t.hasAttribute("class")){var r=null===(e=t.getAttribute("class"))||void 0===e?void 0:e.replace(h,"").trim();if(null==r?void 0:r.length)return r.split(/\s+/).filter((function(t){return g.test(t)&&!t.match(/[a-z][A-Z][a-z][A-Z]/)&&!t.match(/[0-9][0-9][0-9][0-9]/)})).sort()}}return[]}var B=function(){function t(t){var e;this.node=t,this.tagName=this.node.nodeName,this.name=this.tagName.toLowerCase(),this.id=(e=this.node).id&&p.test(e.id)?e.id:null,this.classList=j(this.node),this.guessListAndIndex()}return t.prototype.guessListAndIndex=function(){var t,e,n=this;this._tagList=(e=this.node,-1!==o.indexOf(e.nodeName));var r,i,a,u,s,c=(r=T(this.node.parentNode),i=this.node,u=function(t,e){if(null==t||"function"!=typeof e)return-1;for(var n=0;n<t.length;n++){var r=t[n];if(e.call(void 0,r))return n}return-1}(r,a=function(t){return t.nodeName===i.nodeName}),s=function(t,e){if(null==t||"function"!=typeof e)return-1;for(var n=t.length-1;n>=0;n--){var r=t[n];if(e.call(void 0,r))return n}return-1}(r,a),-1===u||-1===s?[]:r.slice(u,s+1));if(this._tagList&&-1!==(d=c.filter((function(t){return t.tagName===n.tagName})).indexOf(this.node))&&(this._index=d+1),c.length>=3&&(null===(t=this.classList)||void 0===t?void 0:t.length)){for(var f=0,l=0,d=1;d<=c.length;d++){var h=c[d-1];if(h.tagName!==this.tagName){l=0;break}m(this.classList,j(h))&&(l+=1),this.node===h&&(f=d)}3>l||(this._pseudoList=!0,this._index=this._index||f)}},Object.defineProperty(t.prototype,"path",{get:function(){var t;return this._path||(this._path="/"+this.name,this.id&&(this._path+="#"+this.id),(null===(t=this.classList)||void 0===t?void 0:t.length)&&(this._path+="."+this.classList.join("."))),this._path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pseudoList",{get:function(){return!!this._pseudoList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"list",{get:function(){return!!this._tagList||!!this._pseudoList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return function(t){if(t instanceof Element){var e=t.getAttribute("data-growing-index")||t.getAttribute("data-growing-idx")||t.getAttribute("data-index");if(e){if(/^\d{1,10}$/.test(e)&&+e>0&&2147483647>+e)return+e;window.console.error("[GioNode]：标记的index不符合规范（index必须是大于0且小于2147483647的整数字）。",e)}}}(this.node)||this._index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return C(this.node)||this.list},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.node.parentNode?new t(this.node.parentNode):null},enumerable:!1,configurable:!0}),t.prototype.parentPaths=function(t){void 0===t&&(t=!1);for(var e=t?[this]:[],n=this.parent;n&&!x(n.node);)e.push(n),n=n.parent;return e},t}();function k(t){if(t.hasAttribute("href")){var e=t.getAttribute("href");if(e&&0!==e.indexOf("javascript"))return(r=(n=e.slice(0,320)).length)>1&&"/"===n.charAt(r-1)?n.slice(0,r-1):n}var n,r}function H(t){if(t.src&&-1===t.src.indexOf("data:image"))return t.src}var M=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z=function(t){return t.htmlFor||t.getAttribute("for")};function W(t){var e=t.node;return t.list?U(e):y(e.textContent)||void 0}function U(t){var e,n,r=void 0,i=!1;try{for(var o=M(Array.from(t.childNodes)),a=o.next();!a.done;a=o.next()){var u=a.value;if(u.nodeType===Node.TEXT_NODE){var s=y(u.textContent);if(s)return s}if(u.nodeType===Node.ELEMENT_NODE&&-1===["INPUT","SELECT"].indexOf(u.nodeName)){if(new B(u).pseudoList)return;i=D(u)||A(u);var c=V(u);if(i)r=c,i=!1;else if(c||(c=U(u)),c)return c}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function V(t){return function(t){var e=t;if(e){var n=function(t){var e=t.getAttribute("data-growing-title")||t.getAttribute("data-title")||t.getAttribute("growing-title")||t.getAttribute("title");return(null==e?void 0:e.trim())||void 0}(e);if(n)return n;var r,i,o,a=new B(t);switch(t.nodeName.toLowerCase()){case"a":return function(t){if((I(t)||D(t))&&t.textContent){var e=y(t.textContent);if(e)return e}var n=k(t);if(n){var r=n.indexOf("?");return r>-1?n.slice(0,r):n}}(e);case"svg":return function(t){var e,n;try{for(var r=M(Array.from(t.childNodes)),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.nodeType===Node.ELEMENT_NODE&&"use"===o.tagName.toLowerCase()&&o.hasAttribute("xlink:href"))return o.getAttribute("xlink:href")}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}(e);case"button":return(null===(o=(i=e).name)||void 0===o?void 0:o.length)?i.name:y(i.textContent)||U(i);case"img":return function(t){if(t.alt)return t.alt;var e=H(t);if(e){var n=e.split("?")[0].split("/");if(n.length>0)return n[n.length-1]}}(e);case"label":return W(a);case"input":return function(t){if(P(t))return t.value;if("password"!==t.type&&w(t,"data-growing-track"))return t.value;if(_(t)){var e=E(t,(function(t){return"LABEL"===t.nodeName}));if(!e&&t.id)for(var n=document.body.getElementsByTagName("label"),r=0;r<n.length;r++){var i=n[r];if(z(i)===t.id){e=i;break}}if(e){var o=W(new B(e));if(o&&o.length>0)return o+" ("+t.checked+")"}return t.value}}(e);case"select":return Array.from((r=e).options).filter((function(t){return t.selected})).map((function(t){return t.label})).join(", ")||r.value;case"form":return function(t){var e,n,r=t.getElementsByTagName("input");try{for(var i=M(Array.from(r)),o=i.next();!o.done;o=i.next()){var a=o.value;if(("search"===a.type||"text"===a.type&&("q"===a.id||-1!==a.id.indexOf("search")||"q"===a.name||-1!==a.name.indexOf("search")))&&!R(a)){var u=V(a);if(u)return u}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}(e)}return I(e)?function(t){var e=y(t.textContent);if(e)return e}(e):L(e)&&!D(e)?function(t){var e,n,r="";try{for(var i=M(Array.from(t.childNodes)),o=i.next();!o.done;o=i.next()){var a=o.value;r+=(a.nodeType===Node.TEXT_NODE&&a.textContent?a.textContent.trim():"")+" "}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return y(r,!1)}(e):a.container||D(t)?U(e):void 0}}(t)||void 0}var X,Z,G=(X=function(t,e){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])},X(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+e+" is not a constructor or null");function n(){this.constructor=t}X(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Y=function(t){function e(e){var n=t.call(this,e)||this;n.node=e;var r=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(function(t){for(var e=t.parentPaths(!0),n=Math.min(e.length,+(e.length>=10)+4),r=["","",""],i=0;i<e.length;i++){var o=e[i].path,a=e[i].name;r[0]=o+r[0],r[2]="/"+a+r[2],n>i&&(r[1]=o+r[1])}return r}(n),3),i=r[0],o=r[1],a=r[2];return n.fullXpath=i,n.xpath=o,n.skeleton=a,n}return G(e,t),Object.defineProperty(e.prototype,"href",{get:function(){return function(t){var e=t;if(e)switch(t.nodeName.toLowerCase()){case"a":return k(e);case"img":return H(e)}}(this.node)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return V(this.node)},enumerable:!1,configurable:!0}),e}(B),F=function(){return F=Object.assign||function(t){for(var e,n=1,r=arguments.length;r>n;n++)for(var i in e=arguments[n])({}).hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},F.apply(this,arguments)},J=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!0),this.origin=t,this.action=e,this.direct=n,this.target="self"===e?t:function(t){for(var e,n;t&&(n=void 0,!((e=t)instanceof Element&&-1===d.indexOf(null===(n=e.tagName)||void 0===n?void 0:n.toLowerCase())))&&t.parentNode;)t=t.parentNode;var r,i=t.parentNode;return!x(i)&&(D(i)||"BUTTON"===(r=i).tagName&&function(t){return 0!==T(t).length&&!O(t).map((function(t){return t.tagName})).some((function(t){return-1===l.indexOf(t)}))}(r))?i:t}(t),this.ignore=R(this.target),this.vnode=new Y(this.target),this.tagName=this.vnode.tagName}return Object.defineProperty(t.prototype,"content",{get:function(){return this.vnode.content},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"href",{get:function(){return this.vnode.href},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.vnode.index},enumerable:!1,configurable:!0}),t.prototype.inferParentIndex=function(){var e=this;return this.parentIndex||E(this.target,(function(n){var r=new t(n,e.action,!1);r.traceable()&&r.index&&(e.parentIndex=r.index)})),this.parentIndex},Object.defineProperty(t.prototype,"xpath",{get:function(){return this.vnode.xpath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullXpath",{get:function(){return this.vnode.fullXpath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skeleton",{get:function(){return this.vnode.skeleton},enumerable:!1,configurable:!0}),t.prototype.info=function(t){return void 0===t&&(t=!0),t&&this.inferParentIndex(),{skeleton:this.skeleton,fullXpath:this.fullXpath,xpath:this.xpath,content:this.content,href:this.href,index:this.parentIndex||this.index}},t.prototype.traceable=function(){if(this.ignore)return!1;if(this.direct){if("click"===this.action||"hover"===this.action){if(-1!==f.indexOf(this.target.tagName))return!1;if("INPUT"===this.target.tagName&&!P(this.target))return!1;if(!C(this.target)&&!S(this.target,5))return!1}return!0}return this.vnode.container},t.prototype.trackNodes=function(){if(!this.traceable())return[];var t=[this];if("submit"!==this.action)for(var e=this.parentElement;e;){if(e.ignore)return[];e.traceable()&&t.unshift(e),e=e.parentElement}var n=void 0;return t.map((function(t){var e=t.info(!1),r=e.index;return!n&&r&&(n=r),F(F({},e),{index:n||r})}))},Object.defineProperty(t.prototype,"parentElement",{get:function(){var e=this.target.parentNode;if(e&&e.nodeName&&!x(e))return new t(e,this.action,!1)},enumerable:!1,configurable:!0}),t}(),$=["i","span","em","b","strong","svg"];!function(t){t[t.OUTER=0]="OUTER",t[t.INNER_COVERED=1]="INNER_COVERED",t[t.INNER_SHOW=2]="INNER_SHOW"}(Z||(Z={}));var q=function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;o>i;i++)!r&&i in e||(r||(r=[].slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||[].slice.call(e))}(["HR","BR","SCRIPT","NOSCRIPT","STYLE","HEAD","BASE","LINK","META","TITLE","BODY","HTML","TEMPLATE","CODE"],f,!0),K=["SELECT","A","BUTTON","INPUT","IMG","FORM"],Q=function(t,e,n){return document.elementFromPoint(e,n)===t},tt=function(){function r(t,e,n){this.node=t,this.parentNodeDesc=e,this.devicesInfo=n,this.proxy=new J(t),this.tagName=this.node.tagName,this.name=this.tagName.toLowerCase(),this.isIgnore=!!this.node.dataset.growingIgnore,this.isUnSupported=-1!==q.indexOf(this.tagName),this.rect=this.computeWindowRect()}return r.prototype.info=function(){var e=this.desc();e.zLevel+=this.devicesInfo.webviewZLevel;var r=this.getDeviceRect(this.rect);return n(e,"isContainer"),t(t(t({},e),r),{parentXPath:this.parentNodeDesc.isContainer?this.parentNodeDesc.xpath:void 0,href:this.proxy.href,content:this.proxy.content,nodeType:this.nodeType()})},r.prototype.nodeType=function(){return"input"!==this.name||_(this.node)?this.node.tagName:"INPUT_BTN"},r.prototype.desc=function(){return{index:this.parentNodeDesc.index||this.proxy.index,zLevel:this.zLevel(),xpath:this.proxy.xpath,isContainer:this.isDefinedContainer()}},r.prototype.cssVisible=function(){var t=this.computedStyle();return Number(t.opacity)>0&&"visible"===t.visibility&&"none"!==t.display},r.prototype.viewportStatus=function(){var t=this.rect,e=t.top,n=t.left,r=t.width,i=t.height,o=this.devicesInfo,a=o.winWidth,u=o.winHeight;if(0>=r||0>=i)return Z.OUTER;var s=this.node;return u>e&&a>n&&r>0&&i>0?Q(s,n+r/2,e+i/2)||Q(s,n+1,e+1)||Q(s,n+r-1,e+1)||Q(s,n+1,e+i-1)||Q(s,n+r-1,e+i-1)?Z.INNER_SHOW:Z.INNER_COVERED:Z.OUTER},r.prototype.isCircleable=function(){return this.proxy.target===this.proxy.origin&&(!!this.isDefinedContainer()||!("input"===this.name&&this.node instanceof HTMLInputElement&&"password"===this.node.type)&&(-1!==K.indexOf(this.name)||(I(this.node)?!this.isBigBlank():this.hasBackgroundImage()&&S(this.node,4))))},r.prototype.isSimpleContainer=function(){return"select"===this.name||this.isDefaultContainer()&&(function(t,e){if(0===t.children.length)return!1;for(var n=0,r=Array.from(t.children);n<r.length;n++){var i=r[n];if(-1===e.indexOf(i.tagName.toLowerCase()))return!1}return!0}(this.node,$)||!this.node.childElementCount)},r.prototype.isDefinedContainer=function(){var t;return e(this.isContainer)?this.isDefaultContainer()||this.isMarkContainer()||L(this.node)&&(!!(null===(t=this.node.innerText)||void 0===t?void 0:t.trim().length)||function(t){var e=t.attributes;if(e.length>0)for(var n=0;n<e.length;n++){var r=e[n].value;if(r&&"false"!==r)return!0}return!1}(this.node))||"select"===this.name:!!this.isContainer},r.prototype.isDefaultContainer=function(){return-1!==a.indexOf(this.tagName)||P(this.node)},r.prototype.isMarkContainer=function(){return this.node.hasAttribute("data-growing-container")||this.node.hasAttribute("growing-container")},r.prototype.isBigBlank=function(){var t=this.node.innerText.trim().length,e=this.rect,n=e.width,r=e.height,i=this.devicesInfo,o=i.winWidth,a=i.winHeight;return!t&&(n>o>>1||r>a>>1)},r.prototype.hasBackgroundImage=function(){var t=this.computedStyle().backgroundImage;return!!t&&"none"!==t&&t.length>0},r.prototype.zLevel=function(){var t=this.computedStyle(),e=t.zIndex;if("auto"!==e)return Number(e||"0")+this.parentNodeDesc.zLevel;switch(t.position){case"relative":return this.parentNodeDesc.zLevel+2;case"sticky":return this.parentNodeDesc.zLevel+3;case"absolute":return this.parentNodeDesc.zLevel+4;case"fixed":return this.parentNodeDesc.zLevel+5;default:return this.parentNodeDesc.zLevel+1}},r.prototype.computeWindowRect=function(){if(this.rect)return this.rect;var t=this.node.getBoundingClientRect(),e=t.top,n=t.bottom,r=t.left,i=t.right-r,o=n-e;return 0>e?o=e+o:e+o>this.devicesInfo.winHeight&&(o=this.devicesInfo.winHeight-e),0>r?i=r+i:r+i>this.devicesInfo.winWidth&&(i=this.devicesInfo.winWidth-r),this.rect={top:e,left:r,width:i,height:o},this.rect},r.prototype.computedStyle=function(){return window.getComputedStyle(this.node)},r.prototype.getDeviceRect=function(t){var e=this.devicesInfo,n=e.scale,r=e.webviewTop,i=e.webviewLeft;return{top:t.top*n+r,left:t.left*n+i,width:t.width*n,height:t.height*n}},r}(),et=["DOMContentLoaded","onreadystatechange"],nt=["scroll","resize","load","beforeunload","popstate","hashchange","pagehide","unload"];function rt(t,e,n,r,i){var o=document.documentElement.clientWidth;return{winWidth:o,winHeight:document.documentElement.clientHeight,scale:n/o,webviewTop:e,webviewLeft:t,webviewWidth:n,webviewHeight:r,webviewZLevel:i}}var it,ot=function(){function t(t){this.growingIO=t,this.addDomChangeListener()}return t.prototype.getDomTree=function(t,e,n,r,i,o){console.info("HYBRID: 调用getDomTre方法，参数",arguments);var a=rt(t,e,n,r,i),u={isContainer:!1,zLevel:0},s=this.getElementsByParent(o||document.body,u,a),c={page:this.growingIO.dataStore.currentPage,elements:s};return console.log("HYBRID: 元素节点信息",c),c},t.prototype.getElementsByParent=function(t,e,n){var r=this,i=[];return[].slice.call(t.childNodes,0).filter((function(t){return 1===t.nodeType})).forEach((function(t){var o=new tt(t,e,n);if(o.cssVisible()&&!o.isIgnore){switch(o.viewportStatus()){case Z.INNER_SHOW:o.isCircleable()&&i.push(o.info());break;case Z.INNER_COVERED:o.isDefaultContainer()&&i.push(o.info())}o.isSimpleContainer()||[].push.apply(i,r.getElementsByParent(t,o.desc(),n))}})),i},t.prototype.addDomChangeListener=function(){var t,e=function(e){return void 0===e&&(e=""),function(){var n;"beforeunload"===e&&t&&t.disconnect(),console.log("HYBRID: 调用桥onDomChanged方法，事件类型:",e),null===(n=window.GrowingWebViewJavascriptBridge)||void 0===n||n.onDomChanged()}};(t=new MutationObserver(e("mutation"))).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),et.forEach((function(t){i(document,t,e(t))})),nt.forEach((function(t){i(window,t,e(t))}))},t}();window.gioHybridCircle={name:"gioHybridCircle",method:function(t){var e,n=this;this.growingIO=t,null===(e=this.growingIO.emitter)||void 0===e||e.on("SDK_INITIALIZED",(function(){window.GrowingWebViewJavascriptBridge&&(it=new ot(n.growingIO),window.GrowingWebViewJavascriptBridge.getDomTree=it.getDomTree.bind(it))}))}}}();
