!function(r){"function"==typeof define&&define.amd?define(r):r()}((function(){"use strict";window.gioCompress={name:"gioCompress",method:function(r){var e=this;this.growingIO=r,this._compress=function(r,e,o){if(null===r)return"";var t,n,s,f={},h={},i="",u="",c="",a=2,p=3,l=2,d=[],m=0,w=0;for(s=0;s<r.length;s+=1)if(i=r.charAt(s),{}.hasOwnProperty.call(f,i)||(f[i]=p++,h[i]=!0),u=c+i,{}.hasOwnProperty.call(f,u))c=u;else{if({}.hasOwnProperty.call(h,c)){if(256>c.charCodeAt(0)){for(t=0;l>t;t++)m<<=1,w===e-1?(w=0,d.push(o(m)),m=0):w++;for(n=c.charCodeAt(0),t=0;8>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1}else{for(n=1,t=0;l>t;t++)m=m<<1|n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n=0;for(n=c.charCodeAt(0),t=0;16>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1}0==--a&&(a=Math.pow(2,l),l++),delete h[c]}else for(n=f[c],t=0;l>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1;0==--a&&(a=Math.pow(2,l),l++),f[u]=p++,c=i+""}if(""!==c){if({}.hasOwnProperty.call(h,c)){if(256>c.charCodeAt(0)){for(t=0;l>t;t++)m<<=1,w===e-1?(w=0,d.push(o(m)),m=0):w++;for(n=c.charCodeAt(0),t=0;8>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1}else{for(n=1,t=0;l>t;t++)m=m<<1|n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n=0;for(n=c.charCodeAt(0),t=0;16>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1}0==--a&&(a=Math.pow(2,l),l++),delete h[c]}else for(n=f[c],t=0;l>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1;0==--a&&(a=Math.pow(2,l),l++)}for(n=2,t=0;l>t;t++)m=m<<1|1&n,w===e-1?(w=0,d.push(o(m)),m=0):w++,n>>=1;for(;;){if(m<<=1,w===e-1){d.push(o(m));break}w++}return d.join("")},this.compress=function(r){var o=e;return e._compress(r,16,(function(r){return o.f(r)}))},this.compressToUTF16=function(r){var o=e;return null===r?"":e._compress(r,15,(function(r){return o.f(r+32)}))+" "},this.compressToUint8Array=function(r){for(var o=e.compress(r),t=new Uint8Array(2*o.length),n=0,s=o.length;s>n;n++){var f=o.charCodeAt(n);t[2*n]=f>>>8,t[2*n+1]=f%256}return t},this.compressToEncodedURIComponent=function(r){return null==r?"":e._compress(r,6,(function(r){return this.keyStrUriSafe.charAt(r)}))},this.f=String.fromCharCode,this.keyStrUriSafe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}}}));
